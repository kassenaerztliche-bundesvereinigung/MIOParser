/*
 *  Licensed to the Kassen√§rztliche Bundesvereinigung (KBV) (c) 2020 - 2021 under one
 *  or more contributor license agreements. See the NOTICE file
 *  distributed with this work for additional information
 *  regarding copyright ownership. The KBV licenses this file
 *  to you under the Apache License, Version 2.0 (the
 *  "License"); you may not use this file except in compliance
 *  with the License. You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing,
 *  software distributed under the License is distributed on an
 *  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 *  KIND, either express or implied. See the License for the
 *  specific language governing permissions and limitations
 *  under the License.
 *
 */

import VaccinationBundleEntry from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationBundleEntry";
import VaccinationCompositionAddendum from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationCompositionAddendum";
import VaccinationCompositionPrime from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationCompositionPrime";
import VaccinationCondition from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationCondition";
import VaccinationObservationImmunizationStatus from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationObservationImmunizationStatus";
import VaccinationOrganization from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationOrganization";
import VaccinationPatient from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationPatient";
import VaccinationPractitioner from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationPractitioner";
import VaccinationPractitionerrole from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationPractitionerrole";
import VaccinationPractitionerroleAddendum from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationPractitionerroleAddendum";
import VaccinationPractitionerAddendum from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationPractitionerAddendum";
import VaccinationProvenance from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationProvenance";
import VaccinationRecordAddendum from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationRecordAddendum";
import VaccinationRecordPrime from "./../Definitions/KBV/IM/1.00.000/Profile/VaccinationRecordPrime";
import ZAEBBundle from "./../Definitions/KBV/ZB/1.00.000/Profile/ZAEBBundle";
import ZAEBComposition from "./../Definitions/KBV/ZB/1.00.000/Profile/ZAEBComposition";
import ZAEBGaplessDocumentation from "./../Definitions/KBV/ZB/1.00.000/Profile/ZAEBGaplessDocumentation";
import ZAEBObservation from "./../Definitions/KBV/ZB/1.00.000/Profile/ZAEBObservation";
import ZAEBOrganization from "./../Definitions/KBV/ZB/1.00.000/Profile/ZAEBOrganization";
import ZAEBPatient from "./../Definitions/KBV/ZB/1.00.000/Profile/ZAEBPatient";
import MRAppointmentPregnancy from "./../Definitions/KBV/MR/1.00.000/Profile/MRAppointmentPregnancy";
import MRBundle from "./../Definitions/KBV/MR/1.00.000/Profile/MRBundle";
import MRClinicalImpressionBirthExaminationChildInformation from "./../Definitions/KBV/MR/1.00.000/Profile/MRClinicalImpressionBirthExaminationChildInformation";
import MRClinicalImpressionBirthExaminationDeliveryInformation from "./../Definitions/KBV/MR/1.00.000/Profile/MRClinicalImpressionBirthExaminationDeliveryInformation";
import MRClinicalImpressionFirstExaminationAfterChildbirth from "./../Definitions/KBV/MR/1.00.000/Profile/MRClinicalImpressionFirstExaminationAfterChildbirth";
import MRClinicalImpressionInitialExamination from "./../Definitions/KBV/MR/1.00.000/Profile/MRClinicalImpressionInitialExamination";
import MRClinicalImpressionPregnancyChartEntry from "./../Definitions/KBV/MR/1.00.000/Profile/MRClinicalImpressionPregnancyChartEntry";
import MRClinicalImpressionPregnancyExaminationDischargeSummary from "./../Definitions/KBV/MR/1.00.000/Profile/MRClinicalImpressionPregnancyExaminationDischargeSummary";
import MRClinicalImpressionSecondExaminationAfterChildbirth from "./../Definitions/KBV/MR/1.00.000/Profile/MRClinicalImpressionSecondExaminationAfterChildbirth";
import MRComposition from "./../Definitions/KBV/MR/1.00.000/Profile/MRComposition";
import MRDiagnosticReportUltrasoundI from "./../Definitions/KBV/MR/1.00.000/Profile/MRDiagnosticReportUltrasoundI";
import MRDiagnosticReportUltrasoundII from "./../Definitions/KBV/MR/1.00.000/Profile/MRDiagnosticReportUltrasoundII";
import MRDiagnosticReportUltrasoundIII from "./../Definitions/KBV/MR/1.00.000/Profile/MRDiagnosticReportUltrasoundIII";
import MREncounterArrivalMaternityHospital from "./../Definitions/KBV/MR/1.00.000/Profile/MREncounterArrivalMaternityHospital";
import MREncounterGeneral from "./../Definitions/KBV/MR/1.00.000/Profile/MREncounterGeneral";
import MREncounterInpatientTreatment from "./../Definitions/KBV/MR/1.00.000/Profile/MREncounterInpatientTreatment";
import MRObservationAbnormalities from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationAbnormalities";
import MRObservationAdviceOnIodineIntake from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationAdviceOnIodineIntake";
import MRObservationAge from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationAge";
import MRObservationAntiDProphylaxisPostPartum from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationAntiDProphylaxisPostPartum";
import MRObservationApgarScore from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationApgarScore";
import MRObservationBaselineWeightMother from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBaselineWeightMother";
import MRObservationBiometricsI from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBiometricsI";
import MRObservationBiometricsII from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBiometricsII";
import MRObservationBiometricsIII from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBiometricsIII";
import MRObservationBirthHeight from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBirthHeight";
import MRObservationBirthMode from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBirthMode";
import MRObservationBloodGroupSerology from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBloodGroupSerology";
import MRObservationBloodGroupSerologyChild from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBloodGroupSerologyChild";
import MRObservationBloodPressure from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBloodPressure";
import MRObservationBreastfeedingBehavior from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationBreastfeedingBehavior";
import MRObservationCalculatedDeliveryDate from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationCalculatedDeliveryDate";
import MRObservationCardiotocography from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationCardiotocography";
import MRObservationCatalogueA from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationCatalogueA";
import MRObservationChildIsHealthy from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationChildIsHealthy";
import MRObservationChildMovement from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationChildMovement";
import MRObservationChildPosition from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationChildPosition";
import MRObservationConsultationInitiated from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationConsultationInitiated";
import MRObservationDateDeterminationChildbirth from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationDateDeterminationChildbirth";
import MRObservationDateOfConception from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationDateOfConception";
import MRObservationDeterminationOfPregnancy from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationDeterminationOfPregnancy";
import MRObservationDirectCoombstest from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationDirectCoombstest";
import MRObservationEdema from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationEdema";
import MRObservationExamination from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationExamination";
import MRObservationExternalBirth from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationExternalBirth";
import MRObservationFindingsRequiredControl from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationFindingsRequiredControl";
import MRObservationFundusHeight from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationFundusHeight";
import MRObservationGeneralInformation from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationGeneralInformation";
import MRObservationGravida from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationGravida";
import MRObservationGynecologicalFindingNormal from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationGynecologicalFindingNormal";
import MRObservationHeadCircumference from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationHeadCircumference";
import MRObservationHeartAction from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationHeartAction";
import MRObservationHeartSoundsChild from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationHeartSoundsChild";
import MRObservationHeight from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationHeight";
import MRObservationHIVTestPerformed from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationHIVTestPerformed";
import MRObservationImmunizationStatus from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationImmunizationStatus";
import MRObservationInpatientStayDuringPregnancy from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationInpatientStayDuringPregnancy";
import MRObservationLiveBirth from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationLiveBirth";
import MRObservationLocalisationPlacenta from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationLocalisationPlacenta";
import MRObservationMalformation from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationMalformation";
import MRObservationMenstrualCycle from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationMenstrualCycle";
import MRObservationMorphology from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationMorphology";
import MRObservationNeedOfTreatmentU3 from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationNeedOfTreatmentU3";
import MRObservationNumberOfCheckups from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationNumberOfCheckups";
import MRObservationoGTTDiagnosistest from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationoGTTDiagnosistest";
import MRObservationoGTTPretest from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationoGTTPretest";
import MRObservationOtherBloodGroupSystems from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationOtherBloodGroupSystems";
import MRObservationOtherUltrasoundStudies from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationOtherUltrasoundStudies";
import MRObservationPara from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationPara";
import MRObservationPercentile from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationPercentile";
import MRObservationpHValueUmbilicalArtery from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationpHValueUmbilicalArtery";
import MRObservationPregnancyInformation from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationPregnancyInformation";
import MRObservationPregnancyRisk from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationPregnancyRisk";
import MRObservationPresentationAtBirthClinic from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationPresentationAtBirthClinic";
import MRObservationPreviousPregnancy from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationPreviousPregnancy";
import MRObservationPuerperiumNormal from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationPuerperiumNormal";
import MRObservationSingletonPregnancy from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationSingletonPregnancy";
import MRObservationSpecialFindings from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationSpecialFindings";
import MRObservationTimelyDevelopment from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationTimelyDevelopment";
import MRObservationU3Performed from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationU3Performed";
import MRObservationUltrasound from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationUltrasound";
import MRObservationUrine from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationUrine";
import MRObservationUrineBlood from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationUrineBlood";
import MRObservationUrineNitrite from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationUrineNitrite";
import MRObservationUrineProtein from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationUrineProtein";
import MRObservationUrineSediment from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationUrineSediment";
import MRObservationUrineSugar from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationUrineSugar";
import MRObservationVaginalExamination from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationVaginalExamination";
import MRObservationVaricosis from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationVaricosis";
import MRObservationWeightChild from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationWeightChild";
import MRObservationWeightMother from "./../Definitions/KBV/MR/1.00.000/Profile/MRObservationWeightMother";
import MROrganization from "./../Definitions/KBV/MR/1.00.000/Profile/MROrganization";
import MRPatientChild from "./../Definitions/KBV/MR/1.00.000/Profile/MRPatientChild";
import MRPatientMother from "./../Definitions/KBV/MR/1.00.000/Profile/MRPatientMother";
import MRPractitioner from "./../Definitions/KBV/MR/1.00.000/Profile/MRPractitioner";
import MRProcedureAntiDProphylaxis from "./../Definitions/KBV/MR/1.00.000/Profile/MRProcedureAntiDProphylaxis";
import MRProcedureCounselling from "./../Definitions/KBV/MR/1.00.000/Profile/MRProcedureCounselling";
import CMRAppointmentNextAppointment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRAppointmentNextAppointment";
import CMRAppointmentNextImmunizationAppointment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRAppointmentNextImmunizationAppointment";
import CMRAppointmentParticipationPeriod from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRAppointmentParticipationPeriod";
import CMRBundle from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRBundle";
import CMRCarePlanU2U9Result from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCarePlanU2U9Result";
import CMRCarePlanU3U4HipScreeningPlan from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCarePlanU3U4HipScreeningPlan";
import CMRCompositionCysticFibrosisScreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionCysticFibrosisScreening";
import CMRCompositionExtendedNewbornScreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionExtendedNewbornScreening";
import CMRCompositionHipScreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionHipScreening";
import CMRCompositionNeonatalHearscreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionNeonatalHearscreening";
import CMRCompositionPercentileCurve from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionPercentileCurve";
import CMRCompositionPulseOxymetryScreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionPulseOxymetryScreening";
import CMRCompositionU1 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU1";
import CMRCompositionU2 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU2";
import CMRCompositionU3 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU3";
import CMRCompositionU4 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU4";
import CMRCompositionU5 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU5";
import CMRCompositionU6 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU6";
import CMRCompositionU7 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU7";
import CMRCompositionU7a from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU7a";
import CMRCompositionU8 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU8";
import CMRCompositionU9 from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRCompositionU9";
import CMRDiagnosticReportPercentileBodyMeasures from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportPercentileBodyMeasures";
import CMRDiagnosticReportPercentileValues from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportPercentileValues";
import CMRDiagnosticReportU1ApgarScore from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1ApgarScore";
import CMRDiagnosticReportU1BirthLength from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1BirthLength";
import CMRDiagnosticReportU1BirthTraumaOfFetus from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1BirthTraumaOfFetus";
import CMRDiagnosticReportU1BirthWeight from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1BirthWeight";
import CMRDiagnosticReportU1CongenitalMalformation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1CongenitalMalformation";
import CMRDiagnosticReportU1EdemaOfNewborn from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1EdemaOfNewborn";
import CMRDiagnosticReportU1NeonatalJaundice from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1NeonatalJaundice";
import CMRDiagnosticReportU1TermInfant from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1TermInfant";
import CMRDiagnosticReportU1U3PulseOxymetry from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1U3PulseOxymetry";
import CMRDiagnosticReportU1U5NeonatalHearscreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1U5NeonatalHearscreening";
import CMRDiagnosticReportU1U5PediatricDiagnosticAudiologyService from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU1U5PediatricDiagnosticAudiologyService";
import CMRDiagnosticReportU2PhysicalExamHead from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2PhysicalExamHead";
import CMRDiagnosticReportU2PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2PhysicalExamMouthNose";
import CMRDiagnosticReportU2PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2PhysicalExamMusculoskeletalSystem";
import CMRDiagnosticReportU2PhysicalExamSkin from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2PhysicalExamSkin";
import CMRDiagnosticReportU2U3PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2U3PhysicalExamAbdomenGenitals";
import CMRDiagnosticReportU2U3PhysicalExamEars from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2U3PhysicalExamEars";
import CMRDiagnosticReportU2U3PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2U3PhysicalExamEyes";
import CMRDiagnosticReportU2U4PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2U4PhysicalExamChestLungRespiratoryTract";
import CMRDiagnosticReportU2U6BodyMeasures from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2U6BodyMeasures";
import CMRDiagnosticReportU2U6PhysicalExamHeartBloodCirculation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU2U6PhysicalExamHeartBloodCirculation";
import CMRDiagnosticReportU3PhysicalExamHead from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU3PhysicalExamHead";
import CMRDiagnosticReportU3PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU3PhysicalExamMusculoskeletalSystem";
import CMRDiagnosticReportU3U4HipScreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU3U4HipScreening";
import CMRDiagnosticReportU3U4PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU3U4PhysicalExamMouthNose";
import CMRDiagnosticReportU3U4PhysicalExamSkin from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU3U4PhysicalExamSkin";
import CMRDiagnosticReportU4PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU4PhysicalExamAbdomenGenitals";
import CMRDiagnosticReportU4PhysicalExamHead from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU4PhysicalExamHead";
import CMRDiagnosticReportU4PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU4PhysicalExamMusculoskeletalSystem";
import CMRDiagnosticReportU4U5PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU4U5PhysicalExamEyes";
import CMRDiagnosticReportU5PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU5PhysicalExamChestLungRespiratoryTract";
import CMRDiagnosticReportU5PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU5PhysicalExamMouthNose";
import CMRDiagnosticReportU5PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU5PhysicalExamMusculoskeletalSystem";
import CMRDiagnosticReportU5U6PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU5U6PhysicalExamAbdomenGenitals";
import CMRDiagnosticReportU5U6PhysicalExamHead from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU5U6PhysicalExamHead";
import CMRDiagnosticReportU5U9PhysicalExamSkin from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU5U9PhysicalExamSkin";
import CMRDiagnosticReportU6PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU6PhysicalExamEyes";
import CMRDiagnosticReportU6PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU6PhysicalExamMouthNose";
import CMRDiagnosticReportU6PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU6PhysicalExamMusculoskeletalSystem";
import CMRDiagnosticReportU6U7PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU6U7PhysicalExamChestLungRespiratoryTract";
import CMRDiagnosticReportU7aandU9PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7aandU9PhysicalExamChestLungRespiratoryTract";
import CMRDiagnosticReportU7aandU9PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7aandU9PhysicalExamMusculoskeletalSystem";
import CMRDiagnosticReportU7aPhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7aPhysicalExamMouthNose";
import CMRDiagnosticReportU7aU9PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7aU9PhysicalExamEyes";
import CMRDiagnosticReportU7PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7PhysicalExamEyes";
import CMRDiagnosticReportU7PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7PhysicalExamMouthNose";
import CMRDiagnosticReportU7PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7PhysicalExamMusculoskeletalSystem";
import CMRDiagnosticReportU7U7aPhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7U7aPhysicalExamAbdomenGenitals";
import CMRDiagnosticReportU7U9BodyMeasures from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7U9BodyMeasures";
import CMRDiagnosticReportU7U9PhysicalExamHeartBloodCirculation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU7U9PhysicalExamHeartBloodCirculation";
import CMRDiagnosticReportU8PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU8PhysicalExamAbdomenGenitals";
import CMRDiagnosticReportU8PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU8PhysicalExamChestLungRespiratoryTract";
import CMRDiagnosticReportU8PhysicalExamEars from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU8PhysicalExamEars";
import CMRDiagnosticReportU8PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU8PhysicalExamMusculoskeletalSystem";
import CMRDiagnosticReportU8U9PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU8U9PhysicalExamMouthNose";
import CMRDiagnosticReportU9PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRDiagnosticReportU9PhysicalExamAbdomenGenitals";
import CMREncounter from "./../Definitions/KBV/CMR/1.00.000/Profile/CMREncounter";
import CMRMedicationStatementVitamineKProphylaxis from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRMedicationStatementVitamineKProphylaxis";
import CMRObservationComments from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationComments";
import CMRObservationHeadCircumference from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationHeadCircumference";
import CMRObservationPercentileValues from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationPercentileValues";
import CMRObservationPhysicalExamParentalAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationPhysicalExamParentalAssessment";
import CMRObservationU1ApgarScore from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1ApgarScore";
import CMRObservationU1BirthLength from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1BirthLength";
import CMRObservationU1BirthTraumaOfFetus from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1BirthTraumaOfFetus";
import CMRObservationU1BirthWeight from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1BirthWeight";
import CMRObservationU1CongenitalMalformation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1CongenitalMalformation";
import CMRObservationU1EdemaofNewborn from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1EdemaofNewborn";
import CMRObservationU1FamilyHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1FamilyHistory";
import CMRObservationU1NeonatalJaundice from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1NeonatalJaundice";
import CMRObservationU1TermInfant from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1TermInfant";
import CMRObservationU1U3BaseExcess from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3BaseExcess";
import CMRObservationU1U3Birthmode from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3Birthmode";
import CMRObservationU1U3DateTimeofBirth from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3DateTimeofBirth";
import CMRObservationU1U3DifferentFoetalPosition from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3DifferentFoetalPosition";
import CMRObservationU1U3FoetalPosition from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3FoetalPosition";
import CMRObservationU1U3GenderBirthHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3GenderBirthHistory";
import CMRObservationU1U3LengthGestationAtBirth from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3LengthGestationAtBirth";
import CMRObservationU1U3pHValue from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3pHValue";
import CMRObservationU1U3PregnancyHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3PregnancyHistory";
import CMRObservationU1U3PrenatalFinding from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3PrenatalFinding";
import CMRObservationU1U3PulseOxymetryMeasurement from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U3PulseOxymetryMeasurement";
import CMRObservationU1U5CounselingAboutHearscreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U5CounselingAboutHearscreening";
import CMRObservationU1U5NeonatalHearscreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U5NeonatalHearscreening";
import CMRObservationU1U5PediatricDiagnosticAudiologyService from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU1U5PediatricDiagnosticAudiologyService";
import CMRObservationU2CurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2CurrentChildHistory";
import CMRObservationU2FamilyHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2FamilyHistory";
import CMRObservationU2PhysicalExamHead from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2PhysicalExamHead";
import CMRObservationU2PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2PhysicalExamMouthNose";
import CMRObservationU2PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2PhysicalExamMusculoskeletalSystem";
import CMRObservationU2PhysicalExamSkin from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2PhysicalExamSkin";
import CMRObservationU2SocialHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2SocialHistory";
import CMRObservationU2U3PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U3PhysicalExamAbdomenGenitals";
import CMRObservationU2U3PhysicalExamEars from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U3PhysicalExamEars";
import CMRObservationU2U3PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U3PhysicalExamEyes";
import CMRObservationU2U4PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U4PhysicalExamChestLungRespiratoryTract";
import CMRObservationU2U6BodyWeight from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U6BodyWeight";
import CMRObservationU2U6PhysicalExamHeartBloodCirculation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U6PhysicalExamHeartBloodCirculation";
import CMRObservationU2U9BodyHeightMeasure from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U9BodyHeightMeasure";
import CMRObservationU2U9NoAbnormalityDetected from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U9NoAbnormalityDetected";
import CMRObservationU2U9RelevantHistoryResults from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU2U9RelevantHistoryResults";
import CMRObservationU3CurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3CurrentChildHistory";
import CMRObservationU3DevelopmentAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3DevelopmentAssessment";
import CMRObservationU3FamilyHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3FamilyHistory";
import CMRObservationU3PhysicalExamHead from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3PhysicalExamHead";
import CMRObservationU3PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3PhysicalExamMusculoskeletalSystem";
import CMRObservationU3U4HipScreeningHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3U4HipScreeningHistory";
import CMRObservationU3U4HipScreeningResult from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3U4HipScreeningResult";
import CMRObservationU3U4PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3U4PhysicalExamMouthNose";
import CMRObservationU3U4PhysicalExamSkin from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3U4PhysicalExamSkin";
import CMRObservationU3U4ProblemOfHip from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3U4ProblemOfHip";
import CMRObservationU3U6IndicationforAbnormality from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3U6IndicationforAbnormality";
import CMRObservationU3U9AgeAppropriateDevelopment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3U9AgeAppropriateDevelopment";
import CMRObservationU3U9SocialHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU3U9SocialHistory";
import CMRObservationU4CurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU4CurrentChildHistory";
import CMRObservationU4DevelopmentAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU4DevelopmentAssessment";
import CMRObservationU4PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU4PhysicalExamAbdomenGenitals";
import CMRObservationU4PhysicalExamHead from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU4PhysicalExamHead";
import CMRObservationU4PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU4PhysicalExamMusculoskeletalSystem";
import CMRObservationU4U5PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU4U5PhysicalExamEyes";
import CMRObservationU4U9StatusOfImmunization from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU4U9StatusOfImmunization";
import CMRObservationU5CurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU5CurrentChildHistory";
import CMRObservationU5DevelopmentAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU5DevelopmentAssessment";
import CMRObservationU5PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU5PhysicalExamChestLungRespiratoryTract";
import CMRObservationU5PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU5PhysicalExamMouthNose";
import CMRObservationU5PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU5PhysicalExamMusculoskeletalSystem";
import CMRObservationU5U6PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU5U6PhysicalExamAbdomenGenitals";
import CMRObservationU5U6PhysicalExamHead from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU5U6PhysicalExamHead";
import CMRObservationU5U9PhysicalExamSkin from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU5U9PhysicalExamSkin";
import CMRObservationU6CurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU6CurrentChildHistory";
import CMRObservationU6DevelopmentAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU6DevelopmentAssessment";
import CMRObservationU6PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU6PhysicalExamEyes";
import CMRObservationU6PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU6PhysicalExamMouthNose";
import CMRObservationU6PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU6PhysicalExamMusculoskeletalSystem";
import CMRObservationU6U7PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU6U7PhysicalExamChestLungRespiratoryTract";
import CMRObservationU7aandU9PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7aandU9PhysicalExamChestLungRespiratoryTract";
import CMRObservationU7aandU9PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7aandU9PhysicalExamMusculoskeletalSystem";
import CMRObservationU7aCurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7aCurrentChildHistory";
import CMRObservationU7aDevelopmentAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7aDevelopmentAssessment";
import CMRObservationU7aPhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7aPhysicalExamMouthNose";
import CMRObservationU7aU9PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7aU9PhysicalExamEyes";
import CMRObservationU7CurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7CurrentChildHistory";
import CMRObservationU7DevelopmentAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7DevelopmentAssessment";
import CMRObservationU7PhysicalExamEyes from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7PhysicalExamEyes";
import CMRObservationU7PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7PhysicalExamMouthNose";
import CMRObservationU7PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7PhysicalExamMusculoskeletalSystem";
import CMRObservationU7U7aPhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7U7aPhysicalExamAbdomenGenitals";
import CMRObservationU7U9BMI from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7U9BMI";
import CMRObservationU7U9BodyWeight from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7U9BodyWeight";
import CMRObservationU7U9PhysicalExamHeartBloodCirculation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU7U9PhysicalExamHeartBloodCirculation";
import CMRObservationU8CurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU8CurrentChildHistory";
import CMRObservationU8DevelopmentAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU8DevelopmentAssessment";
import CMRObservationU8PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU8PhysicalExamAbdomenGenitals";
import CMRObservationU8PhysicalExamChestLungRespiratoryTract from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU8PhysicalExamChestLungRespiratoryTract";
import CMRObservationU8PhysicalExamEars from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU8PhysicalExamEars";
import CMRObservationU8PhysicalExamMusculoskeletalSystem from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU8PhysicalExamMusculoskeletalSystem";
import CMRObservationU8U9PhysicalExamMouthNose from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU8U9PhysicalExamMouthNose";
import CMRObservationU9CurrentChildHistory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU9CurrentChildHistory";
import CMRObservationU9DevelopmentAssessment from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU9DevelopmentAssessment";
import CMRObservationU9PhysicalExamAbdomenGenitals from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRObservationU9PhysicalExamAbdomenGenitals";
import CMROrganization from "./../Definitions/KBV/CMR/1.00.000/Profile/CMROrganization";
import CMROrganizationScreeningLaboratory from "./../Definitions/KBV/CMR/1.00.000/Profile/CMROrganizationScreeningLaboratory";
import CMRPatient from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRPatient";
import CMRPractitioner from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRPractitioner";
import CMRProcedureConsultationAnnotation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureConsultationAnnotation";
import CMRProcedureU1U3CysticFibrosisScreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU1U3CysticFibrosisScreening";
import CMRProcedureU1U3NewbornBloodSpotScreening from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU1U3NewbornBloodSpotScreening";
import CMRProcedureU2Consultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU2Consultation";
import CMRProcedureU3Consultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU3Consultation";
import CMRProcedureU4Consultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU4Consultation";
import CMRProcedureU5Consultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU5Consultation";
import CMRProcedureU6Consultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU6Consultation";
import CMRProcedureU7aConsultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU7aConsultation";
import CMRProcedureU7Consultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU7Consultation";
import CMRProcedureU8Consultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU8Consultation";
import CMRProcedureU9Consultation from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRProcedureU9Consultation";
import CMRServiceRequestDentalReferral from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRServiceRequestDentalReferral";
import CMRServiceRequestU1U3PulseOxymetryClarification from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRServiceRequestU1U3PulseOxymetryClarification";
import CMRServiceRequestU1U5ReferralPediatricAudiologyService from "./../Definitions/KBV/CMR/1.00.000/Profile/CMRServiceRequestU1U5ReferralPediatricAudiologyService";
import PCBundle from "./../Definitions/KBV/CMR/1.00.000/Profile/PCBundle";
import PCCompositionExaminationParticipation from "./../Definitions/KBV/CMR/1.00.000/Profile/PCCompositionExaminationParticipation";
import PCEncounter from "./../Definitions/KBV/CMR/1.00.000/Profile/PCEncounter";
import PCOrganization from "./../Definitions/KBV/CMR/1.00.000/Profile/PCOrganization";
import PCPatient from "./../Definitions/KBV/CMR/1.00.000/Profile/PCPatient";
import PCPractitioner from "./../Definitions/KBV/CMR/1.00.000/Profile/PCPractitioner";
import PNBundle from "./../Definitions/KBV/CMR/1.00.000/Profile/PNBundle";
import PNCompositionParentalNotes from "./../Definitions/KBV/CMR/1.00.000/Profile/PNCompositionParentalNotes";
import PNEncounter from "./../Definitions/KBV/CMR/1.00.000/Profile/PNEncounter";
import PNObservationParentalNotes from "./../Definitions/KBV/CMR/1.00.000/Profile/PNObservationParentalNotes";
import PNPatient from "./../Definitions/KBV/CMR/1.00.000/Profile/PNPatient";

export type VaccinationResource =
    | VaccinationBundleEntry
    | VaccinationCompositionAddendum
    | VaccinationCompositionPrime
    | VaccinationCondition
    | VaccinationObservationImmunizationStatus
    | VaccinationOrganization
    | VaccinationPatient
    | VaccinationPractitioner
    | VaccinationPractitionerrole
    | VaccinationPractitionerroleAddendum
    | VaccinationPractitionerAddendum
    | VaccinationProvenance
    | VaccinationRecordAddendum
    | VaccinationRecordPrime;

export type ZAEBResource =
    | ZAEBBundle
    | ZAEBComposition
    | ZAEBGaplessDocumentation
    | ZAEBObservation
    | ZAEBOrganization
    | ZAEBPatient;

export type MRResource =
    | MRAppointmentPregnancy
    | MRBundle
    | MRClinicalImpressionBirthExaminationChildInformation
    | MRClinicalImpressionBirthExaminationDeliveryInformation
    | MRClinicalImpressionFirstExaminationAfterChildbirth
    | MRClinicalImpressionInitialExamination
    | MRClinicalImpressionPregnancyChartEntry
    | MRClinicalImpressionPregnancyExaminationDischargeSummary
    | MRClinicalImpressionSecondExaminationAfterChildbirth
    | MRComposition
    | MRDiagnosticReportUltrasoundI
    | MRDiagnosticReportUltrasoundII
    | MRDiagnosticReportUltrasoundIII
    | MREncounterArrivalMaternityHospital
    | MREncounterGeneral
    | MREncounterInpatientTreatment
    | MRObservationAbnormalities
    | MRObservationAdviceOnIodineIntake
    | MRObservationAge
    | MRObservationAntiDProphylaxisPostPartum
    | MRObservationApgarScore
    | MRObservationBaselineWeightMother
    | MRObservationBiometricsI
    | MRObservationBiometricsII
    | MRObservationBiometricsIII
    | MRObservationBirthHeight
    | MRObservationBirthMode
    | MRObservationBloodGroupSerology
    | MRObservationBloodGroupSerologyChild
    | MRObservationBloodPressure
    | MRObservationBreastfeedingBehavior
    | MRObservationCalculatedDeliveryDate
    | MRObservationCardiotocography
    | MRObservationCatalogueA
    | MRObservationChildIsHealthy
    | MRObservationChildMovement
    | MRObservationChildPosition
    | MRObservationConsultationInitiated
    | MRObservationDateDeterminationChildbirth
    | MRObservationDateOfConception
    | MRObservationDeterminationOfPregnancy
    | MRObservationDirectCoombstest
    | MRObservationEdema
    | MRObservationExamination
    | MRObservationExternalBirth
    | MRObservationFindingsRequiredControl
    | MRObservationFundusHeight
    | MRObservationGeneralInformation
    | MRObservationGravida
    | MRObservationGynecologicalFindingNormal
    | MRObservationHeadCircumference
    | MRObservationHeartAction
    | MRObservationHeartSoundsChild
    | MRObservationHeight
    | MRObservationHIVTestPerformed
    | MRObservationImmunizationStatus
    | MRObservationInpatientStayDuringPregnancy
    | MRObservationLiveBirth
    | MRObservationLocalisationPlacenta
    | MRObservationMalformation
    | MRObservationMenstrualCycle
    | MRObservationMorphology
    | MRObservationNeedOfTreatmentU3
    | MRObservationNumberOfCheckups
    | MRObservationoGTTDiagnosistest
    | MRObservationoGTTPretest
    | MRObservationOtherBloodGroupSystems
    | MRObservationOtherUltrasoundStudies
    | MRObservationPara
    | MRObservationPercentile
    | MRObservationpHValueUmbilicalArtery
    | MRObservationPregnancyInformation
    | MRObservationPregnancyRisk
    | MRObservationPresentationAtBirthClinic
    | MRObservationPreviousPregnancy
    | MRObservationPuerperiumNormal
    | MRObservationSingletonPregnancy
    | MRObservationSpecialFindings
    | MRObservationTimelyDevelopment
    | MRObservationU3Performed
    | MRObservationUltrasound
    | MRObservationUrine
    | MRObservationUrineBlood
    | MRObservationUrineNitrite
    | MRObservationUrineProtein
    | MRObservationUrineSediment
    | MRObservationUrineSugar
    | MRObservationVaginalExamination
    | MRObservationVaricosis
    | MRObservationWeightChild
    | MRObservationWeightMother
    | MROrganization
    | MRPatientChild
    | MRPatientMother
    | MRPractitioner
    | MRProcedureAntiDProphylaxis
    | MRProcedureCounselling;

export type CMRResource =
    | CMRAppointmentNextAppointment
    | CMRAppointmentNextImmunizationAppointment
    | CMRAppointmentParticipationPeriod
    | CMRBundle
    | CMRCarePlanU2U9Result
    | CMRCarePlanU3U4HipScreeningPlan
    | CMRCompositionCysticFibrosisScreening
    | CMRCompositionExtendedNewbornScreening
    | CMRCompositionHipScreening
    | CMRCompositionNeonatalHearscreening
    | CMRCompositionPercentileCurve
    | CMRCompositionPulseOxymetryScreening
    | CMRCompositionU1
    | CMRCompositionU2
    | CMRCompositionU3
    | CMRCompositionU4
    | CMRCompositionU5
    | CMRCompositionU6
    | CMRCompositionU7
    | CMRCompositionU7a
    | CMRCompositionU8
    | CMRCompositionU9
    | CMRDiagnosticReportPercentileBodyMeasures
    | CMRDiagnosticReportPercentileValues
    | CMRDiagnosticReportU1ApgarScore
    | CMRDiagnosticReportU1BirthLength
    | CMRDiagnosticReportU1BirthTraumaOfFetus
    | CMRDiagnosticReportU1BirthWeight
    | CMRDiagnosticReportU1CongenitalMalformation
    | CMRDiagnosticReportU1EdemaOfNewborn
    | CMRDiagnosticReportU1NeonatalJaundice
    | CMRDiagnosticReportU1TermInfant
    | CMRDiagnosticReportU1U3PulseOxymetry
    | CMRDiagnosticReportU1U5NeonatalHearscreening
    | CMRDiagnosticReportU1U5PediatricDiagnosticAudiologyService
    | CMRDiagnosticReportU2PhysicalExamHead
    | CMRDiagnosticReportU2PhysicalExamMouthNose
    | CMRDiagnosticReportU2PhysicalExamMusculoskeletalSystem
    | CMRDiagnosticReportU2PhysicalExamSkin
    | CMRDiagnosticReportU2U3PhysicalExamAbdomenGenitals
    | CMRDiagnosticReportU2U3PhysicalExamEars
    | CMRDiagnosticReportU2U3PhysicalExamEyes
    | CMRDiagnosticReportU2U4PhysicalExamChestLungRespiratoryTract
    | CMRDiagnosticReportU2U6BodyMeasures
    | CMRDiagnosticReportU2U6PhysicalExamHeartBloodCirculation
    | CMRDiagnosticReportU3PhysicalExamHead
    | CMRDiagnosticReportU3PhysicalExamMusculoskeletalSystem
    | CMRDiagnosticReportU3U4HipScreening
    | CMRDiagnosticReportU3U4PhysicalExamMouthNose
    | CMRDiagnosticReportU3U4PhysicalExamSkin
    | CMRDiagnosticReportU4PhysicalExamAbdomenGenitals
    | CMRDiagnosticReportU4PhysicalExamHead
    | CMRDiagnosticReportU4PhysicalExamMusculoskeletalSystem
    | CMRDiagnosticReportU4U5PhysicalExamEyes
    | CMRDiagnosticReportU5PhysicalExamChestLungRespiratoryTract
    | CMRDiagnosticReportU5PhysicalExamMouthNose
    | CMRDiagnosticReportU5PhysicalExamMusculoskeletalSystem
    | CMRDiagnosticReportU5U6PhysicalExamAbdomenGenitals
    | CMRDiagnosticReportU5U6PhysicalExamHead
    | CMRDiagnosticReportU5U9PhysicalExamSkin
    | CMRDiagnosticReportU6PhysicalExamEyes
    | CMRDiagnosticReportU6PhysicalExamMouthNose
    | CMRDiagnosticReportU6PhysicalExamMusculoskeletalSystem
    | CMRDiagnosticReportU6U7PhysicalExamChestLungRespiratoryTract
    | CMRDiagnosticReportU7aandU9PhysicalExamChestLungRespiratoryTract
    | CMRDiagnosticReportU7aandU9PhysicalExamMusculoskeletalSystem
    | CMRDiagnosticReportU7aPhysicalExamMouthNose
    | CMRDiagnosticReportU7aU9PhysicalExamEyes
    | CMRDiagnosticReportU7PhysicalExamEyes
    | CMRDiagnosticReportU7PhysicalExamMouthNose
    | CMRDiagnosticReportU7PhysicalExamMusculoskeletalSystem
    | CMRDiagnosticReportU7U7aPhysicalExamAbdomenGenitals
    | CMRDiagnosticReportU7U9BodyMeasures
    | CMRDiagnosticReportU7U9PhysicalExamHeartBloodCirculation
    | CMRDiagnosticReportU8PhysicalExamAbdomenGenitals
    | CMRDiagnosticReportU8PhysicalExamChestLungRespiratoryTract
    | CMRDiagnosticReportU8PhysicalExamEars
    | CMRDiagnosticReportU8PhysicalExamMusculoskeletalSystem
    | CMRDiagnosticReportU8U9PhysicalExamMouthNose
    | CMRDiagnosticReportU9PhysicalExamAbdomenGenitals
    | CMREncounter
    | CMRMedicationStatementVitamineKProphylaxis
    | CMRObservationComments
    | CMRObservationHeadCircumference
    | CMRObservationPercentileValues
    | CMRObservationPhysicalExamParentalAssessment
    | CMRObservationU1ApgarScore
    | CMRObservationU1BirthLength
    | CMRObservationU1BirthTraumaOfFetus
    | CMRObservationU1BirthWeight
    | CMRObservationU1CongenitalMalformation
    | CMRObservationU1EdemaofNewborn
    | CMRObservationU1FamilyHistory
    | CMRObservationU1NeonatalJaundice
    | CMRObservationU1TermInfant
    | CMRObservationU1U3BaseExcess
    | CMRObservationU1U3Birthmode
    | CMRObservationU1U3DateTimeofBirth
    | CMRObservationU1U3DifferentFoetalPosition
    | CMRObservationU1U3FoetalPosition
    | CMRObservationU1U3GenderBirthHistory
    | CMRObservationU1U3LengthGestationAtBirth
    | CMRObservationU1U3pHValue
    | CMRObservationU1U3PregnancyHistory
    | CMRObservationU1U3PrenatalFinding
    | CMRObservationU1U3PulseOxymetryMeasurement
    | CMRObservationU1U5CounselingAboutHearscreening
    | CMRObservationU1U5NeonatalHearscreening
    | CMRObservationU1U5PediatricDiagnosticAudiologyService
    | CMRObservationU2CurrentChildHistory
    | CMRObservationU2FamilyHistory
    | CMRObservationU2PhysicalExamHead
    | CMRObservationU2PhysicalExamMouthNose
    | CMRObservationU2PhysicalExamMusculoskeletalSystem
    | CMRObservationU2PhysicalExamSkin
    | CMRObservationU2SocialHistory
    | CMRObservationU2U3PhysicalExamAbdomenGenitals
    | CMRObservationU2U3PhysicalExamEars
    | CMRObservationU2U3PhysicalExamEyes
    | CMRObservationU2U4PhysicalExamChestLungRespiratoryTract
    | CMRObservationU2U6BodyWeight
    | CMRObservationU2U6PhysicalExamHeartBloodCirculation
    | CMRObservationU2U9BodyHeightMeasure
    | CMRObservationU2U9NoAbnormalityDetected
    | CMRObservationU2U9RelevantHistoryResults
    | CMRObservationU3CurrentChildHistory
    | CMRObservationU3DevelopmentAssessment
    | CMRObservationU3FamilyHistory
    | CMRObservationU3PhysicalExamHead
    | CMRObservationU3PhysicalExamMusculoskeletalSystem
    | CMRObservationU3U4HipScreeningHistory
    | CMRObservationU3U4HipScreeningResult
    | CMRObservationU3U4PhysicalExamMouthNose
    | CMRObservationU3U4PhysicalExamSkin
    | CMRObservationU3U4ProblemOfHip
    | CMRObservationU3U6IndicationforAbnormality
    | CMRObservationU3U9AgeAppropriateDevelopment
    | CMRObservationU3U9SocialHistory
    | CMRObservationU4CurrentChildHistory
    | CMRObservationU4DevelopmentAssessment
    | CMRObservationU4PhysicalExamAbdomenGenitals
    | CMRObservationU4PhysicalExamHead
    | CMRObservationU4PhysicalExamMusculoskeletalSystem
    | CMRObservationU4U5PhysicalExamEyes
    | CMRObservationU4U9StatusOfImmunization
    | CMRObservationU5CurrentChildHistory
    | CMRObservationU5DevelopmentAssessment
    | CMRObservationU5PhysicalExamChestLungRespiratoryTract
    | CMRObservationU5PhysicalExamMouthNose
    | CMRObservationU5PhysicalExamMusculoskeletalSystem
    | CMRObservationU5U6PhysicalExamAbdomenGenitals
    | CMRObservationU5U6PhysicalExamHead
    | CMRObservationU5U9PhysicalExamSkin
    | CMRObservationU6CurrentChildHistory
    | CMRObservationU6DevelopmentAssessment
    | CMRObservationU6PhysicalExamEyes
    | CMRObservationU6PhysicalExamMouthNose
    | CMRObservationU6PhysicalExamMusculoskeletalSystem
    | CMRObservationU6U7PhysicalExamChestLungRespiratoryTract
    | CMRObservationU7aandU9PhysicalExamChestLungRespiratoryTract
    | CMRObservationU7aandU9PhysicalExamMusculoskeletalSystem
    | CMRObservationU7aCurrentChildHistory
    | CMRObservationU7aDevelopmentAssessment
    | CMRObservationU7aPhysicalExamMouthNose
    | CMRObservationU7aU9PhysicalExamEyes
    | CMRObservationU7CurrentChildHistory
    | CMRObservationU7DevelopmentAssessment
    | CMRObservationU7PhysicalExamEyes
    | CMRObservationU7PhysicalExamMouthNose
    | CMRObservationU7PhysicalExamMusculoskeletalSystem
    | CMRObservationU7U7aPhysicalExamAbdomenGenitals
    | CMRObservationU7U9BMI
    | CMRObservationU7U9BodyWeight
    | CMRObservationU7U9PhysicalExamHeartBloodCirculation
    | CMRObservationU8CurrentChildHistory
    | CMRObservationU8DevelopmentAssessment
    | CMRObservationU8PhysicalExamAbdomenGenitals
    | CMRObservationU8PhysicalExamChestLungRespiratoryTract
    | CMRObservationU8PhysicalExamEars
    | CMRObservationU8PhysicalExamMusculoskeletalSystem
    | CMRObservationU8U9PhysicalExamMouthNose
    | CMRObservationU9CurrentChildHistory
    | CMRObservationU9DevelopmentAssessment
    | CMRObservationU9PhysicalExamAbdomenGenitals
    | CMROrganization
    | CMROrganizationScreeningLaboratory
    | CMRPatient
    | CMRPractitioner
    | CMRProcedureConsultationAnnotation
    | CMRProcedureU1U3CysticFibrosisScreening
    | CMRProcedureU1U3NewbornBloodSpotScreening
    | CMRProcedureU2Consultation
    | CMRProcedureU3Consultation
    | CMRProcedureU4Consultation
    | CMRProcedureU5Consultation
    | CMRProcedureU6Consultation
    | CMRProcedureU7aConsultation
    | CMRProcedureU7Consultation
    | CMRProcedureU8Consultation
    | CMRProcedureU9Consultation
    | CMRServiceRequestDentalReferral
    | CMRServiceRequestU1U3PulseOxymetryClarification
    | CMRServiceRequestU1U5ReferralPediatricAudiologyService;

export type PNResource =
    | PNBundle
    | PNCompositionParentalNotes
    | PNEncounter
    | PNObservationParentalNotes
    | PNPatient;

export type PCResource =
    | PCBundle
    | PCCompositionExaminationParticipation
    | PCEncounter
    | PCOrganization
    | PCPatient
    | PCPractitioner;

export type KBVResource =
    | VaccinationResource
    | ZAEBResource
    | MRResource
    | CMRResource
    | PNResource
    | PCResource;

export type MIOType = Readonly<{
    profile: string;
    type: any; // eslint-disable-line @typescript-eslint/no-explicit-any
    version: string;
    constraints?: any;
}>;

export type KBVBundleResource =
    | VaccinationBundleEntry
    | ZAEBBundle
    | MRBundle
    | CMRBundle
    | PNBundle
    | PCBundle;

export type MIOTypeList = MIOType[];
export const BundleTypes: MIOTypeList = [
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Bundle_Entry",
        type: VaccinationBundleEntry,
        version: "1.00.000"
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Bundle",
        type: ZAEBBundle,
        version: "1.00.000"
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Bundle",
        type: MRBundle,
        version: "1.00.000"
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Bundle",
        type: CMRBundle,
        version: "1.00.000"
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Bundle",
        type: PCBundle,
        version: "1.00.000"
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Bundle",
        type: PNBundle,
        version: "1.00.000"
    }
];

export const MIOTypes: MIOTypeList = [
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Bundle_Entry",
        type: VaccinationBundleEntry,
        version: "1.00.000",
        constraints: [
            {
                key: "bdl-7",
                severity: "error",
                human:
                    "FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId (except in history bundles)",
                expression:
                    "(type = 'history') or entry.where(fullUrl.exists()).select(fullUrl&resource.meta.versionId).isDistinct()",
                xpath:
                    "(f:type/@value = 'history') or (count(for $entry in f:entry[f:resource] return $entry[count(parent::f:Bundle/f:entry[f:fullUrl/@value=$entry/f:fullUrl/@value and ((not(f:resource/*/f:meta/f:versionId/@value) and not($entry/f:resource/*/f:meta/f:versionId/@value)) or f:resource/*/f:meta/f:versionId/@value=$entry/f:resource/*/f:meta/f:versionId/@value)])!=1])=0)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-9",
                severity: "error",
                human: "A document must have an identifier with a system and a value",
                expression:
                    "type = 'document' implies (identifier.system.exists() and identifier.value.exists())",
                xpath:
                    "not(f:type/@value = 'document') or exists(f:identifier/f:system) or exists(f:identifier/f:value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-3",
                severity: "error",
                human:
                    "entry.request mandatory for batch/transaction/history, otherwise prohibited",
                expression:
                    "entry.all(request.exists() = (%resource.type = 'batch' or %resource.type = 'transaction' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:request) or (f:type/@value = 'batch') or (f:type/@value = 'transaction') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-4",
                severity: "error",
                human:
                    "entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited",
                expression:
                    "entry.all(response.exists() = (%resource.type = 'batch-response' or %resource.type = 'transaction-response' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:response) or (f:type/@value = 'batch-response') or (f:type/@value = 'transaction-response') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-12",
                severity: "error",
                human: "A message must have a MessageHeader as the first resource",
                expression:
                    "type = 'message' implies entry.first().resource.is(MessageHeader)",
                xpath:
                    "not(f:type/@value='message') or f:entry[1]/f:resource/f:MessageHeader",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-1",
                severity: "error",
                human: "total only when a search or history",
                expression: "total.empty() or (type = 'searchset') or (type = 'history')",
                xpath:
                    "not(f:total) or (f:type/@value = 'searchset') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-2",
                severity: "error",
                human: "entry.search only when a search",
                expression: "entry.search.empty() or (type = 'searchset')",
                xpath: "not(f:entry/f:search) or (f:type/@value = 'searchset')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-11",
                severity: "error",
                human: "A document must have a Composition as the first resource",
                expression:
                    "type = 'document' implies entry.first().resource.is(Composition)",
                xpath:
                    "not(f:type/@value='document') or f:entry[1]/f:resource/f:Composition",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-10",
                severity: "error",
                human: "A document must have a date",
                expression: "type = 'document' implies (timestamp.hasValue())",
                xpath: "not(f:type/@value = 'document') or exists(f:timestamp/@value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "TypeComposition",
                severity: "error",
                human:
                    "Es muss genau eine Composition_Initial oder Composition_Addendum enthalten sein",
                expression:
                    "entry.where(meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Composition_Prime' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Composition_Addendum').isDistinct()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Bundle_Entry"
            },
            {
                key: "OneComposition",
                severity: "error",
                human: "Es darf genau eine Composition geben",
                expression: "entry.where(ofType(Composition)).isDistinct()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Bundle_Entry"
            },
            {
                key: "UUID",
                severity: "error",
                human: "Es soll eine UUID verwendet werden.",
                expression: "identifer.system.startsWith('urn:uuid:')",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Bundle_Entry"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Composition_Addendum",
        type: VaccinationCompositionAddendum,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Composition_Prime",
        type: VaccinationCompositionPrime,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Condition",
        type: VaccinationCondition,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "con-5",
                severity: "error",
                human:
                    "Condition.clinicalStatus SHALL NOT be present if verification Status is entered-in-error",
                expression:
                    "verificationStatus.coding.where(system='http://terminology.hl7.org/CodeSystem/condition-ver-status' and code='entered-in-error').empty() or clinicalStatus.empty()",
                xpath:
                    "not(exists(f:verificationStatus/f:coding[f:system/@value='http://terminology.hl7.org/CodeSystem/condition-ver-status' and f:code/@value='entered-in-error'])) or not(exists(f:clinicalStatus))",
                source: "http://hl7.org/fhir/StructureDefinition/Condition"
            },
            {
                key: "con-4",
                severity: "error",
                human:
                    "If condition is abated, then clinicalStatus must be either inactive, resolved, or remission",
                expression:
                    "abatement.empty() or clinicalStatus.coding.where(system='http://terminology.hl7.org/CodeSystem/condition-clinical' and (code='resolved' or code='remission' or code='inactive')).exists()",
                xpath:
                    "not(exists(*[starts-with(local-name(.), 'abatement')])) or exists(f:clinicalStatus/f:coding[f:system/@value='http://terminology.hl7.org/CodeSystem/condition-clinical' and f:code/@value=('resolved', 'remission', 'inactive')])",
                source: "http://hl7.org/fhir/StructureDefinition/Condition"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "Most systems will expect a clinicalStatus to be valued for problem-list-items that are managed over time, but might not need a clinicalStatus for point in time encounter-diagnosis."
                    }
                ],
                key: "con-3",
                severity: "warning",
                human:
                    "Condition.clinicalStatus SHALL be present if verificationStatus is not entered-in-error and category is problem-list-item",
                expression:
                    "clinicalStatus.exists() or verificationStatus.coding.where(system='http://terminology.hl7.org/CodeSystem/condition-ver-status' and code = 'entered-in-error').exists() or category.select($this='problem-list-item').empty()",
                xpath:
                    "exists(f:clinicalStatus) or exists(f:verificationStatus/f:coding/f:code/@value='entered-in-error') or not(exists(category[@value='problem-list-item']))",
                source: "http://hl7.org/fhir/StructureDefinition/Condition"
            },
            {
                key: "Cond1",
                severity: "error",
                human:
                    "Das Dokumentationsdatum muss mindestens mit TT.MM.JJJJ angegeben werden",
                expression: "recordedDate.toString().length>=10",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Condition"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Observation_Immunization_Status",
        type: VaccinationObservationImmunizationStatus,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "issued",
                severity: "error",
                human: "Das Untersuchungsdatum muss mindestens 8 Stellen haben",
                expression: "issued.toString().length()>=8",
                source: "Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Organization",
        type: VaccinationOrganization,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "org-1",
                severity: "error",
                human:
                    "The organization SHALL at least have a name or an identifier, and possibly more than one",
                expression: "(identifier.count() + name.count()) > 0",
                xpath: "count(f:identifier | f:name) > 0",
                source: "http://hl7.org/fhir/StructureDefinition/Organization"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Patient",
        type: VaccinationPatient,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pat-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de').empty()",
                source: "Patient"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Practitioner",
        type: VaccinationPractitioner,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pract-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de/0.2').empty()",
                source: "Practitioner"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Practitionerrole",
        type: VaccinationPractitionerrole,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Practitionerrole_Addendum",
        type: VaccinationPractitionerroleAddendum,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Practitioner_Addendum",
        type: VaccinationPractitionerAddendum,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pract-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de/0.2').empty()",
                source: "Practitioner"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Provenance",
        type: VaccinationProvenance,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Record_Addendum",
        type: VaccinationRecordAddendum,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Record_Prime",
        type: VaccinationRecordPrime,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "Occurrence",
                severity: "error",
                human: "Das Impfdatum muss mindestens 10 Stellen haben.",
                expression: "occurrenceDateTime.toString().length()>=10",
                source: "Immunization"
            },
            {
                key: "atc1",
                severity: "error",
                human:
                    "Nur bei Angabe des Snomed Codes 787859002 Impfstoffe (unspezifiziert) muss kein ATC-Code angeben werden.",
                expression:
                    "vaccineCode.coding.where(system='http://snomed.info/sct' and code!='787859002').exists() implies vaccineCode.coding.where(system='http://fhir.de/CodeSystem/dimdi/atc').exists()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_Vaccination_Record_Prime"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Bundle",
        type: ZAEBBundle,
        version: "1.00.000",
        constraints: [
            {
                key: "bdl-7",
                severity: "error",
                human:
                    "FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId (except in history bundles)",
                expression:
                    "(type = 'history') or entry.where(fullUrl.exists()).select(fullUrl&resource.meta.versionId).isDistinct()",
                xpath:
                    "(f:type/@value = 'history') or (count(for $entry in f:entry[f:resource] return $entry[count(parent::f:Bundle/f:entry[f:fullUrl/@value=$entry/f:fullUrl/@value and ((not(f:resource/*/f:meta/f:versionId/@value) and not($entry/f:resource/*/f:meta/f:versionId/@value)) or f:resource/*/f:meta/f:versionId/@value=$entry/f:resource/*/f:meta/f:versionId/@value)])!=1])=0)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-9",
                severity: "error",
                human: "A document must have an identifier with a system and a value",
                expression:
                    "type = 'document' implies (identifier.system.exists() and identifier.value.exists())",
                xpath:
                    "not(f:type/@value = 'document') or exists(f:identifier/f:system) or exists(f:identifier/f:value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-3",
                severity: "error",
                human:
                    "entry.request mandatory for batch/transaction/history, otherwise prohibited",
                expression:
                    "entry.all(request.exists() = (%resource.type = 'batch' or %resource.type = 'transaction' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:request) or (f:type/@value = 'batch') or (f:type/@value = 'transaction') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-4",
                severity: "error",
                human:
                    "entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited",
                expression:
                    "entry.all(response.exists() = (%resource.type = 'batch-response' or %resource.type = 'transaction-response' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:response) or (f:type/@value = 'batch-response') or (f:type/@value = 'transaction-response') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-12",
                severity: "error",
                human: "A message must have a MessageHeader as the first resource",
                expression:
                    "type = 'message' implies entry.first().resource.is(MessageHeader)",
                xpath:
                    "not(f:type/@value='message') or f:entry[1]/f:resource/f:MessageHeader",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-1",
                severity: "error",
                human: "total only when a search or history",
                expression: "total.empty() or (type = 'searchset') or (type = 'history')",
                xpath:
                    "not(f:total) or (f:type/@value = 'searchset') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-2",
                severity: "error",
                human: "entry.search only when a search",
                expression: "entry.search.empty() or (type = 'searchset')",
                xpath: "not(f:entry/f:search) or (f:type/@value = 'searchset')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-11",
                severity: "error",
                human: "A document must have a Composition as the first resource",
                expression:
                    "type = 'document' implies entry.first().resource.is(Composition)",
                xpath:
                    "not(f:type/@value='document') or f:entry[1]/f:resource/f:Composition",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-10",
                severity: "error",
                human: "A document must have a date",
                expression: "type = 'document' implies (timestamp.hasValue())",
                xpath: "not(f:type/@value = 'document') or exists(f:timestamp/@value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "OneComposition",
                severity: "error",
                human: "Es darf genau eine Composition geben",
                expression: "entry.where(ofType(Composition)).isDistinct()",
                source: "Bundle"
            },
            {
                key: "UUID",
                severity: "error",
                human: "Es soll eine UUID verwendet werden.",
                expression: "identifer.system.startsWith('urn:uuid:')",
                source: "Bundle"
            },
            {
                key: "TypeComposition",
                severity: "error",
                human: "Es muss genau eine Composition enthalten sein",
                expression:
                    "entry.where(meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Composition').isDistinct()",
                source: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Bundle"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Composition",
        type: ZAEBComposition,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Gapless_Documentation",
        type: ZAEBGaplessDocumentation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Observation",
        type: ZAEBObservation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "issued",
                severity: "error",
                human: "Das Untersuchungsdatum muss mindestens 8 Stellen haben",
                expression: "issued.toString().length()>=8",
                source: "Observation"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Organization",
        type: ZAEBOrganization,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "org-1",
                severity: "error",
                human:
                    "The organization SHALL at least have a name or an identifier, and possibly more than one",
                expression: "(identifier.count() + name.count()) > 0",
                xpath: "count(f:identifier | f:name) > 0",
                source: "http://hl7.org/fhir/StructureDefinition/Organization"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_ZAEB_Patient",
        type: ZAEBPatient,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pat-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de').empty()",
                source: "Patient"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Appointment_Pregnancy",
        type: MRAppointmentPregnancy,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "app-4",
                severity: "error",
                human:
                    "Cancelation reason is only used for appointments that have been cancelled, or no-show",
                expression:
                    "Appointment.cancelationReason.exists() implies (Appointment.status='no-show' or Appointment.status='cancelled')",
                xpath:
                    "not(exists(f:cancellationReason)) or f:status/@value=('no-show', 'cancelled')",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-3",
                severity: "error",
                human:
                    "Only proposed or cancelled appointments can be missing start/end dates",
                expression:
                    "(start.exists() and end.exists()) or (status in ('proposed' | 'cancelled' | 'waitlist'))",
                xpath:
                    "((exists(f:start) and exists(f:end)) or (f:status/@value='proposed') or (f:status/@value='cancelled') or (f:status/@value='waitlist'))",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-2",
                severity: "error",
                human: "Either start and end are specified, or neither",
                expression: "start.exists() = end.exists()",
                xpath:
                    "((exists(f:start) and exists(f:end)) or (not(exists(f:start)) and not(exists(f:end))))",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Bundle",
        type: MRBundle,
        version: "1.00.000",
        constraints: [
            {
                key: "bdl-7",
                severity: "error",
                human:
                    "FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId (except in history bundles)",
                expression:
                    "(type = 'history') or entry.where(fullUrl.exists()).select(fullUrl&resource.meta.versionId).isDistinct()",
                xpath:
                    "(f:type/@value = 'history') or (count(for $entry in f:entry[f:resource] return $entry[count(parent::f:Bundle/f:entry[f:fullUrl/@value=$entry/f:fullUrl/@value and ((not(f:resource/*/f:meta/f:versionId/@value) and not($entry/f:resource/*/f:meta/f:versionId/@value)) or f:resource/*/f:meta/f:versionId/@value=$entry/f:resource/*/f:meta/f:versionId/@value)])!=1])=0)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-9",
                severity: "error",
                human: "A document must have an identifier with a system and a value",
                expression:
                    "type = 'document' implies (identifier.system.exists() and identifier.value.exists())",
                xpath:
                    "not(f:type/@value = 'document') or exists(f:identifier/f:system) or exists(f:identifier/f:value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-3",
                severity: "error",
                human:
                    "entry.request mandatory for batch/transaction/history, otherwise prohibited",
                expression:
                    "entry.all(request.exists() = (%resource.type = 'batch' or %resource.type = 'transaction' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:request) or (f:type/@value = 'batch') or (f:type/@value = 'transaction') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-4",
                severity: "error",
                human:
                    "entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited",
                expression:
                    "entry.all(response.exists() = (%resource.type = 'batch-response' or %resource.type = 'transaction-response' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:response) or (f:type/@value = 'batch-response') or (f:type/@value = 'transaction-response') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-12",
                severity: "error",
                human: "A message must have a MessageHeader as the first resource",
                expression:
                    "type = 'message' implies entry.first().resource.is(MessageHeader)",
                xpath:
                    "not(f:type/@value='message') or f:entry[1]/f:resource/f:MessageHeader",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-1",
                severity: "error",
                human: "total only when a search or history",
                expression: "total.empty() or (type = 'searchset') or (type = 'history')",
                xpath:
                    "not(f:total) or (f:type/@value = 'searchset') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-2",
                severity: "error",
                human: "entry.search only when a search",
                expression: "entry.search.empty() or (type = 'searchset')",
                xpath: "not(f:entry/f:search) or (f:type/@value = 'searchset')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-11",
                severity: "error",
                human: "A document must have a Composition as the first resource",
                expression:
                    "type = 'document' implies entry.first().resource.is(Composition)",
                xpath:
                    "not(f:type/@value='document') or f:entry[1]/f:resource/f:Composition",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-10",
                severity: "error",
                human: "A document must have a date",
                expression: "type = 'document' implies (timestamp.hasValue())",
                xpath: "not(f:type/@value = 'document') or exists(f:timestamp/@value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "OneComposition",
                severity: "error",
                human: "Es darf genau eine Composition geben",
                expression: "entry.where(ofType(Composition)).isDistinct()",
                source: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Bundle"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_ClinicalImpression_Birth_Examination_Child_Information",
        type: MRClinicalImpressionBirthExaminationChildInformation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_ClinicalImpression_Birth_Examination_Delivery_Information",
        type: MRClinicalImpressionBirthExaminationDeliveryInformation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_ClinicalImpression_First_Examination_After_Childbirth",
        type: MRClinicalImpressionFirstExaminationAfterChildbirth,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_ClinicalImpression_Initial_Examination",
        type: MRClinicalImpressionInitialExamination,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_ClinicalImpression_Pregnancy_Chart_Entry",
        type: MRClinicalImpressionPregnancyChartEntry,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_ClinicalImpression_Pregnancy_Examination_Discharge_Summary",
        type: MRClinicalImpressionPregnancyExaminationDischargeSummary,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_ClinicalImpression_Second_Examination_After_Childbirth",
        type: MRClinicalImpressionSecondExaminationAfterChildbirth,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Composition",
        type: MRComposition,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_DiagnosticReport_Ultrasound_I",
        type: MRDiagnosticReportUltrasoundI,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_DiagnosticReport_Ultrasound_II",
        type: MRDiagnosticReportUltrasoundII,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_DiagnosticReport_Ultrasound_III",
        type: MRDiagnosticReportUltrasoundIII,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Encounter_Arrival_Maternity_Hospital",
        type: MREncounterArrivalMaternityHospital,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Encounter_General",
        type: MREncounterGeneral,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Encounter_Inpatient_Treatment",
        type: MREncounterInpatientTreatment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Abnormalities",
        type: MRObservationAbnormalities,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Advice_On_Iodine_Intake",
        type: MRObservationAdviceOnIodineIntake,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Age",
        type: MRObservationAge,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Anti_D_Prophylaxis_Post_Partum",
        type: MRObservationAntiDProphylaxisPostPartum,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Apgar_Score",
        type: MRObservationApgarScore,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Baseline_Weight_Mother",
        type: MRObservationBaselineWeightMother,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "weight-1",
                severity: "error",
                human:
                    "When Observation.vlaue[x] is not present, Observation.dataAbsentReason SHALL be present",
                expression: "value.empty() implies dataAbsentReason.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_BodyWeight_Max"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Biometrics_I",
        type: MRObservationBiometricsI,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Biometrics_II",
        type: MRObservationBiometricsII,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Biometrics_III",
        type: MRObservationBiometricsIII,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Birth_Height",
        type: MRObservationBirthHeight,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Birth_Mode",
        type: MRObservationBirthMode,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Blood_Group_Serology",
        type: MRObservationBloodGroupSerology,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Blood_Group_Serology_Child",
        type: MRObservationBloodGroupSerologyChild,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Blood_Pressure",
        type: MRObservationBloodPressure,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Breastfeeding_Behavior",
        type: MRObservationBreastfeedingBehavior,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Calculated_Delivery_Date",
        type: MRObservationCalculatedDeliveryDate,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Cardiotocography",
        type: MRObservationCardiotocography,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Catalogue_A",
        type: MRObservationCatalogueA,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Child_Is_Healthy",
        type: MRObservationChildIsHealthy,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Child_Movement",
        type: MRObservationChildMovement,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Child_Position",
        type: MRObservationChildPosition,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Consultation_Initiated",
        type: MRObservationConsultationInitiated,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Date_Determination_Childbirth",
        type: MRObservationDateDeterminationChildbirth,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Date_Of_Conception",
        type: MRObservationDateOfConception,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Determination_Of_Pregnancy",
        type: MRObservationDeterminationOfPregnancy,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Direct_Coombstest",
        type: MRObservationDirectCoombstest,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Edema",
        type: MRObservationEdema,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Examination",
        type: MRObservationExamination,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_External_Birth",
        type: MRObservationExternalBirth,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Findings_Required_Control",
        type: MRObservationFindingsRequiredControl,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Fundus_Height",
        type: MRObservationFundusHeight,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_General_Information",
        type: MRObservationGeneralInformation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Gravida",
        type: MRObservationGravida,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Gynecological_Finding_Normal",
        type: MRObservationGynecologicalFindingNormal,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Head_Circumference",
        type: MRObservationHeadCircumference,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Heart_Action",
        type: MRObservationHeartAction,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Heart_Sounds_Child",
        type: MRObservationHeartSoundsChild,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Height",
        type: MRObservationHeight,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_HIV_Test_Performed",
        type: MRObservationHIVTestPerformed,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Immunization_Status",
        type: MRObservationImmunizationStatus,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Inpatient_Stay_During_Pregnancy",
        type: MRObservationInpatientStayDuringPregnancy,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Live_Birth",
        type: MRObservationLiveBirth,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Localisation_Placenta",
        type: MRObservationLocalisationPlacenta,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Malformation",
        type: MRObservationMalformation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Menstrual_Cycle",
        type: MRObservationMenstrualCycle,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Morphology",
        type: MRObservationMorphology,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Need_Of_Treatment_U3",
        type: MRObservationNeedOfTreatmentU3,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Number_Of_Checkups",
        type: MRObservationNumberOfCheckups,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_oGTT_Diagnosistest",
        type: MRObservationoGTTDiagnosistest,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_oGTT_Pretest",
        type: MRObservationoGTTPretest,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Other_Blood_Group_Systems",
        type: MRObservationOtherBloodGroupSystems,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Other_Ultrasound_Studies",
        type: MRObservationOtherUltrasoundStudies,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Para",
        type: MRObservationPara,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Percentile",
        type: MRObservationPercentile,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_pH_Value_Umbilical_Artery",
        type: MRObservationpHValueUmbilicalArtery,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Pregnancy_Information",
        type: MRObservationPregnancyInformation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Pregnancy_Risk",
        type: MRObservationPregnancyRisk,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Presentation_At_Birth_Clinic",
        type: MRObservationPresentationAtBirthClinic,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Previous_Pregnancy",
        type: MRObservationPreviousPregnancy,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Puerperium_Normal",
        type: MRObservationPuerperiumNormal,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Singleton_Pregnancy",
        type: MRObservationSingletonPregnancy,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Special_Findings",
        type: MRObservationSpecialFindings,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Timely_Development",
        type: MRObservationTimelyDevelopment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_U3_Performed",
        type: MRObservationU3Performed,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Ultrasound",
        type: MRObservationUltrasound,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Urine",
        type: MRObservationUrine,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Urine_Blood",
        type: MRObservationUrineBlood,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Urine_Nitrite",
        type: MRObservationUrineNitrite,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Urine_Protein",
        type: MRObservationUrineProtein,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Urine_Sediment",
        type: MRObservationUrineSediment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Urine_Sugar",
        type: MRObservationUrineSugar,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Vaginal_Examination",
        type: MRObservationVaginalExamination,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Varicosis",
        type: MRObservationVaricosis,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Weight_Child",
        type: MRObservationWeightChild,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "weight-1",
                severity: "error",
                human:
                    "When Observation.vlaue[x] is not present, Observation.dataAbsentReason SHALL be present",
                expression: "value.empty() implies dataAbsentReason.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_BodyWeight_Max"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Observation_Weight_Mother",
        type: MRObservationWeightMother,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "weight-1",
                severity: "error",
                human:
                    "When Observation.vlaue[x] is not present, Observation.dataAbsentReason SHALL be present",
                expression: "value.empty() implies dataAbsentReason.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_BodyWeight_Max"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Organization",
        type: MROrganization,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "org-1",
                severity: "error",
                human:
                    "The organization SHALL at least have a name or an identifier, and possibly more than one",
                expression: "(identifier.count() + name.count()) > 0",
                xpath: "count(f:identifier | f:name) > 0",
                source: "http://hl7.org/fhir/StructureDefinition/Organization"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Patient_Child",
        type: MRPatientChild,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Patient_Mother",
        type: MRPatientMother,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pat-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de').empty()",
                source: "http://fhir.de/StructureDefinition/Patient"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Practitioner",
        type: MRPractitioner,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pract-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de/0.2').empty()",
                source: "http://fhir.de/StructureDefinition/Practitioner"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Procedure_Anti_D_Prophylaxis",
        type: MRProcedureAntiDProphylaxis,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_MR_Procedure_Counselling",
        type: MRProcedureCounselling,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Appointment_Next_Appointment",
        type: CMRAppointmentNextAppointment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "app-4",
                severity: "error",
                human:
                    "Cancelation reason is only used for appointments that have been cancelled, or no-show",
                expression:
                    "Appointment.cancelationReason.exists() implies (Appointment.status='no-show' or Appointment.status='cancelled')",
                xpath:
                    "not(exists(f:cancellationReason)) or f:status/@value=('no-show', 'cancelled')",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-3",
                severity: "error",
                human:
                    "Only proposed or cancelled appointments can be missing start/end dates",
                expression:
                    "(start.exists() and end.exists()) or (status in ('proposed' | 'cancelled' | 'waitlist'))",
                xpath:
                    "((exists(f:start) and exists(f:end)) or (f:status/@value='proposed') or (f:status/@value='cancelled') or (f:status/@value='waitlist'))",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-2",
                severity: "error",
                human: "Either start and end are specified, or neither",
                expression: "start.exists() = end.exists()",
                xpath:
                    "((exists(f:start) and exists(f:end)) or (not(exists(f:start)) and not(exists(f:end))))",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-1",
                severity: "error",
                human: "At least year and month are needed",
                expression: "requestedPeriod.start.toString().length >= 7",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Appointment_Next_Appointment"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Appointment_Next_Immunization_Appointment",
        type: CMRAppointmentNextImmunizationAppointment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "app-4",
                severity: "error",
                human:
                    "Cancelation reason is only used for appointments that have been cancelled, or no-show",
                expression:
                    "Appointment.cancelationReason.exists() implies (Appointment.status='no-show' or Appointment.status='cancelled')",
                xpath:
                    "not(exists(f:cancellationReason)) or f:status/@value=('no-show', 'cancelled')",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-3",
                severity: "error",
                human:
                    "Only proposed or cancelled appointments can be missing start/end dates",
                expression:
                    "(start.exists() and end.exists()) or (status in ('proposed' | 'cancelled' | 'waitlist'))",
                xpath:
                    "((exists(f:start) and exists(f:end)) or (f:status/@value='proposed') or (f:status/@value='cancelled') or (f:status/@value='waitlist'))",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-2",
                severity: "error",
                human: "Either start and end are specified, or neither",
                expression: "start.exists() = end.exists()",
                xpath:
                    "((exists(f:start) and exists(f:end)) or (not(exists(f:start)) and not(exists(f:end))))",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-1",
                severity: "error",
                human: "At least year and month are needed",
                expression: "requestedPeriod.start.toString().length >= 7",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Appointment_Next_Immunization_Appointment"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Appointment_Participation_Period",
        type: CMRAppointmentParticipationPeriod,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "app-4",
                severity: "error",
                human:
                    "Cancelation reason is only used for appointments that have been cancelled, or no-show",
                expression:
                    "Appointment.cancelationReason.exists() implies (Appointment.status='no-show' or Appointment.status='cancelled')",
                xpath:
                    "not(exists(f:cancellationReason)) or f:status/@value=('no-show', 'cancelled')",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-3",
                severity: "error",
                human:
                    "Only proposed or cancelled appointments can be missing start/end dates",
                expression:
                    "(start.exists() and end.exists()) or (status in ('proposed' | 'cancelled' | 'waitlist'))",
                xpath:
                    "((exists(f:start) and exists(f:end)) or (f:status/@value='proposed') or (f:status/@value='cancelled') or (f:status/@value='waitlist'))",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            },
            {
                key: "app-2",
                severity: "error",
                human: "Either start and end are specified, or neither",
                expression: "start.exists() = end.exists()",
                xpath:
                    "((exists(f:start) and exists(f:end)) or (not(exists(f:start)) and not(exists(f:end))))",
                source: "http://hl7.org/fhir/StructureDefinition/Appointment"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Bundle",
        type: CMRBundle,
        version: "1.00.000",
        constraints: [
            {
                key: "bdl-7",
                severity: "error",
                human:
                    "FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId (except in history bundles)",
                expression:
                    "(type = 'history') or entry.where(fullUrl.exists()).select(fullUrl&resource.meta.versionId).isDistinct()",
                xpath:
                    "(f:type/@value = 'history') or (count(for $entry in f:entry[f:resource] return $entry[count(parent::f:Bundle/f:entry[f:fullUrl/@value=$entry/f:fullUrl/@value and ((not(f:resource/*/f:meta/f:versionId/@value) and not($entry/f:resource/*/f:meta/f:versionId/@value)) or f:resource/*/f:meta/f:versionId/@value=$entry/f:resource/*/f:meta/f:versionId/@value)])!=1])=0)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-9",
                severity: "error",
                human: "A document must have an identifier with a system and a value",
                expression:
                    "type = 'document' implies (identifier.system.exists() and identifier.value.exists())",
                xpath:
                    "not(f:type/@value = 'document') or exists(f:identifier/f:system) or exists(f:identifier/f:value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-3",
                severity: "error",
                human:
                    "entry.request mandatory for batch/transaction/history, otherwise prohibited",
                expression:
                    "entry.all(request.exists() = (%resource.type = 'batch' or %resource.type = 'transaction' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:request) or (f:type/@value = 'batch') or (f:type/@value = 'transaction') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-4",
                severity: "error",
                human:
                    "entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited",
                expression:
                    "entry.all(response.exists() = (%resource.type = 'batch-response' or %resource.type = 'transaction-response' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:response) or (f:type/@value = 'batch-response') or (f:type/@value = 'transaction-response') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-12",
                severity: "error",
                human: "A message must have a MessageHeader as the first resource",
                expression:
                    "type = 'message' implies entry.first().resource.is(MessageHeader)",
                xpath:
                    "not(f:type/@value='message') or f:entry[1]/f:resource/f:MessageHeader",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-1",
                severity: "error",
                human: "total only when a search or history",
                expression: "total.empty() or (type = 'searchset') or (type = 'history')",
                xpath:
                    "not(f:total) or (f:type/@value = 'searchset') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-2",
                severity: "error",
                human: "entry.search only when a search",
                expression: "entry.search.empty() or (type = 'searchset')",
                xpath: "not(f:entry/f:search) or (f:type/@value = 'searchset')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-11",
                severity: "error",
                human: "A document must have a Composition as the first resource",
                expression:
                    "type = 'document' implies entry.first().resource.is(Composition)",
                xpath:
                    "not(f:type/@value='document') or f:entry[1]/f:resource/f:Composition",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-10",
                severity: "error",
                human: "A document must have a date",
                expression: "type = 'document' implies (timestamp.hasValue())",
                xpath: "not(f:type/@value = 'document') or exists(f:timestamp/@value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "TypeComposition",
                severity: "error",
                human:
                    "Es d√ºrfen nur Compositions der U-Untersuchungen bzw. der speziellen Fr√ºherkennungsuntersuchungen vorhanden sein",
                expression:
                    "entry.where(meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U1' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U2' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U3' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U4' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U5' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U6' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U7' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U8' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U9' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Cystic_Fibrosis_Screening' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Extended_Newborn_Screening' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Hip_Screening' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Neonatal_Hearscreening' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Percentile_Curve' or meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Pulse_Oxymetry_Screening').isDistinct()",
                source: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Bundle"
            },
            {
                key: "OneComposition",
                severity: "error",
                human: "Es darf genau eine Composition geben",
                expression: "entry.where(ofType(Composition)).isDistinct()",
                source: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Bundle"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Care_Plan_U2_U9_Result",
        type: CMRCarePlanU2U9Result,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Care_Plan_U3_U4_Hip_Screening_Plan",
        type: CMRCarePlanU3U4HipScreeningPlan,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Cystic_Fibrosis_Screening",
        type: CMRCompositionCysticFibrosisScreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Extended_Newborn_Screening",
        type: CMRCompositionExtendedNewbornScreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Hip_Screening",
        type: CMRCompositionHipScreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Neonatal_Hearscreening",
        type: CMRCompositionNeonatalHearscreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Percentile_Curve",
        type: CMRCompositionPercentileCurve,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_Pulse_Oxymetry_Screening",
        type: CMRCompositionPulseOxymetryScreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U1",
        type: CMRCompositionU1,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U2",
        type: CMRCompositionU2,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U3",
        type: CMRCompositionU3,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U4",
        type: CMRCompositionU4,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U5",
        type: CMRCompositionU5,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U6",
        type: CMRCompositionU6,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U7",
        type: CMRCompositionU7,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U7a",
        type: CMRCompositionU7a,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U8",
        type: CMRCompositionU8,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Composition_U9",
        type: CMRCompositionU9,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_Percentile_Body_Measures",
        type: CMRDiagnosticReportPercentileBodyMeasures,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_Percentile_Values",
        type: CMRDiagnosticReportPercentileValues,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_Apgar_Score",
        type: CMRDiagnosticReportU1ApgarScore,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_Birth_Length",
        type: CMRDiagnosticReportU1BirthLength,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_Birth_Trauma_Of_Fetus",
        type: CMRDiagnosticReportU1BirthTraumaOfFetus,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_Birth_Weight",
        type: CMRDiagnosticReportU1BirthWeight,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_Congenital_Malformation",
        type: CMRDiagnosticReportU1CongenitalMalformation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_Edema_Of_Newborn",
        type: CMRDiagnosticReportU1EdemaOfNewborn,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_Neonatal_Jaundice",
        type: CMRDiagnosticReportU1NeonatalJaundice,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_Term_Infant",
        type: CMRDiagnosticReportU1TermInfant,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_U3_Pulse_Oxymetry",
        type: CMRDiagnosticReportU1U3PulseOxymetry,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_U5_Neonatal_Hearscreening",
        type: CMRDiagnosticReportU1U5NeonatalHearscreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U1_U5_Pediatric_Diagnostic_Audiology_Service",
        type: CMRDiagnosticReportU1U5PediatricDiagnosticAudiologyService,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_Physical_Exam_Head",
        type: CMRDiagnosticReportU2PhysicalExamHead,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_Physical_Exam_Mouth_Nose",
        type: CMRDiagnosticReportU2PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_Physical_Exam_Musculoskeletal_System",
        type: CMRDiagnosticReportU2PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_Physical_Exam_Skin",
        type: CMRDiagnosticReportU2PhysicalExamSkin,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_U3_Physical_Exam_Abdomen_Genitals",
        type: CMRDiagnosticReportU2U3PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_U3_Physical_Exam_Ears",
        type: CMRDiagnosticReportU2U3PhysicalExamEars,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_U3_Physical_Exam_Eyes",
        type: CMRDiagnosticReportU2U3PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_U4_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRDiagnosticReportU2U4PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_U6_Body_Measures",
        type: CMRDiagnosticReportU2U6BodyMeasures,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U2_U6_Physical_Exam_Heart_Blood_Circulation",
        type: CMRDiagnosticReportU2U6PhysicalExamHeartBloodCirculation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U3_Physical_Exam_Head",
        type: CMRDiagnosticReportU3PhysicalExamHead,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U3_Physical_Exam_Musculoskeletal_System",
        type: CMRDiagnosticReportU3PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U3_U4_Hip_Screening",
        type: CMRDiagnosticReportU3U4HipScreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U3_U4_Physical_Exam_Mouth_Nose",
        type: CMRDiagnosticReportU3U4PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U3_U4_Physical_Exam_Skin",
        type: CMRDiagnosticReportU3U4PhysicalExamSkin,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U4_Physical_Exam_Abdomen_Genitals",
        type: CMRDiagnosticReportU4PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U4_Physical_Exam_Head",
        type: CMRDiagnosticReportU4PhysicalExamHead,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U4_Physical_Exam_Musculoskeletal_System",
        type: CMRDiagnosticReportU4PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U4_U5_Physical_Exam_Eyes",
        type: CMRDiagnosticReportU4U5PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U5_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRDiagnosticReportU5PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U5_Physical_Exam_Mouth_Nose",
        type: CMRDiagnosticReportU5PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U5_Physical_Exam_Musculoskeletal_System",
        type: CMRDiagnosticReportU5PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U5_U6_Physical_Exam_Abdomen_Genitals",
        type: CMRDiagnosticReportU5U6PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U5_U6_Physical_Exam_Head",
        type: CMRDiagnosticReportU5U6PhysicalExamHead,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U5_U9_Physical_Exam_Skin",
        type: CMRDiagnosticReportU5U9PhysicalExamSkin,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U6_Physical_Exam_Eyes",
        type: CMRDiagnosticReportU6PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U6_Physical_Exam_Mouth_Nose",
        type: CMRDiagnosticReportU6PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U6_Physical_Exam_Musculoskeletal_System",
        type: CMRDiagnosticReportU6PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U6_U7_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRDiagnosticReportU6U7PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7a_and_U9_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRDiagnosticReportU7aandU9PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7a_and_U9_Physical_Exam_Musculoskeletal_System",
        type: CMRDiagnosticReportU7aandU9PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7a_Physical_Exam_Mouth_Nose",
        type: CMRDiagnosticReportU7aPhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7a_U9_Physical_Exam_Eyes",
        type: CMRDiagnosticReportU7aU9PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7_Physical_Exam_Eyes",
        type: CMRDiagnosticReportU7PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7_Physical_Exam_Mouth_Nose",
        type: CMRDiagnosticReportU7PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7_Physical_Exam_Musculoskeletal_System",
        type: CMRDiagnosticReportU7PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7_U7a_Physical_Exam_Abdomen_Genitals",
        type: CMRDiagnosticReportU7U7aPhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7_U9_Body_Measures",
        type: CMRDiagnosticReportU7U9BodyMeasures,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U7_U9_Physical_Exam_Heart_Blood_Circulation",
        type: CMRDiagnosticReportU7U9PhysicalExamHeartBloodCirculation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U8_Physical_Exam_Abdomen_Genitals",
        type: CMRDiagnosticReportU8PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U8_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRDiagnosticReportU8PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U8_Physical_Exam_Ears",
        type: CMRDiagnosticReportU8PhysicalExamEars,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U8_Physical_Exam_Musculoskeletal_System",
        type: CMRDiagnosticReportU8PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U8_U9_Physical_Exam_Mouth_Nose",
        type: CMRDiagnosticReportU8U9PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Diagnostic_Report_U9_Physical_Exam_Abdomen_Genitals",
        type: CMRDiagnosticReportU9PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Encounter",
        type: CMREncounter,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Medication_Statement_Vitamine_K_Prophylaxis",
        type: CMRMedicationStatementVitamineKProphylaxis,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "med-1",
                severity: "error",
                human: "Either free text or doseQuantity and route must exist",
                expression:
                    "dosage.text.empty().not() xor (dosage.route.empty().not() and dosage.doseAndRate.dose.empty().not())",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Medication_Statement_Vitamine_K_Prophylaxis"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_Comments",
        type: CMRObservationComments,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_Head_Circumference",
        type: CMRObservationHeadCircumference,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_Percentile_Values",
        type: CMRObservationPercentileValues,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-1",
                severity: "error",
                human: "At least year, month and day are needed",
                expression: "effective.toString().length() >= 10",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_Percentile_Values"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_Physical_Exam_Parental_Assessment",
        type: CMRObservationPhysicalExamParentalAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Apgar_Score",
        type: CMRObservationU1ApgarScore,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Birth_Length",
        type: CMRObservationU1BirthLength,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Birth_Trauma_Of_Fetus",
        type: CMRObservationU1BirthTraumaOfFetus,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Birth_Weight",
        type: CMRObservationU1BirthWeight,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "weight-1",
                severity: "error",
                human:
                    "When Observation.vlaue[x] is not present, Observation.dataAbsentReason SHALL be present",
                expression: "value.empty() implies dataAbsentReason.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_BodyWeight_Max"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Congenital_Malformation",
        type: CMRObservationU1CongenitalMalformation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Edema_of_Newborn",
        type: CMRObservationU1EdemaofNewborn,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Family_History",
        type: CMRObservationU1FamilyHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Neonatal_Jaundice",
        type: CMRObservationU1NeonatalJaundice,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_Term_Infant",
        type: CMRObservationU1TermInfant,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Base_Excess",
        type: CMRObservationU1U3BaseExcess,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Birthmode",
        type: CMRObservationU1U3Birthmode,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Date_Time_of_Birth",
        type: CMRObservationU1U3DateTimeofBirth,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "date-1",
                severity: "error",
                human: "Der Geburtszeitpunkt muss mindestens 16 Stellen haben",
                expression: "valueDateTime.toString().length()>=16",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Date_Time_of_Birth|1.0.0"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Different_Foetal_Position",
        type: CMRObservationU1U3DifferentFoetalPosition,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Foetal_Position",
        type: CMRObservationU1U3FoetalPosition,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Gender_Birth_History",
        type: CMRObservationU1U3GenderBirthHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Length_Gestation_At_Birth",
        type: CMRObservationU1U3LengthGestationAtBirth,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_pH_Value",
        type: CMRObservationU1U3pHValue,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Pregnancy_History",
        type: CMRObservationU1U3PregnancyHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Prenatal_Finding",
        type: CMRObservationU1U3PrenatalFinding,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Pulse_Oxymetry_Measurement",
        type: CMRObservationU1U3PulseOxymetryMeasurement,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "int-1",
                severity: "error",
                human:
                    "If the code implies, that this Observation covers a control pulse oxymetry measurement, then the interpretation code 'kontrollbed√ºrftig' SHALL not be used",
                expression:
                    "Observation.code.coding.code='250554003:363703001=262134003' implies Observation.interpretation.coding.code != '129125009:{363589002=250554003,408730004=385643006,408732007=410604004}'",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U3_Pulse_Oxymetry_Measurement|1.0.0"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U5_Counseling_About_Hearscreening",
        type: CMRObservationU1U5CounselingAboutHearscreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U5_Neonatal_Hearscreening",
        type: CMRObservationU1U5NeonatalHearscreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-1",
                severity: "error",
                human: "At least year, month and day are needed",
                expression: "effective.toString().length() >= 10",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U5_Neonatal_Hearscreening"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U1_U5_Pediatric_Diagnostic_Audiology_Service",
        type: CMRObservationU1U5PediatricDiagnosticAudiologyService,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_Current_Child_History",
        type: CMRObservationU2CurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_Family_History",
        type: CMRObservationU2FamilyHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_Physical_Exam_Head",
        type: CMRObservationU2PhysicalExamHead,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_Physical_Exam_Mouth_Nose",
        type: CMRObservationU2PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_Physical_Exam_Musculoskeletal_System",
        type: CMRObservationU2PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_Physical_Exam_Skin",
        type: CMRObservationU2PhysicalExamSkin,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_Social_History",
        type: CMRObservationU2SocialHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U3_Physical_Exam_Abdomen_Genitals",
        type: CMRObservationU2U3PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U3_Physical_Exam_Ears",
        type: CMRObservationU2U3PhysicalExamEars,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U3_Physical_Exam_Eyes",
        type: CMRObservationU2U3PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U4_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRObservationU2U4PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U6_Body_Weight",
        type: CMRObservationU2U6BodyWeight,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "weight-1",
                severity: "error",
                human:
                    "When Observation.vlaue[x] is not present, Observation.dataAbsentReason SHALL be present",
                expression: "value.empty() implies dataAbsentReason.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_BodyWeight_Max"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U6_Physical_Exam_Heart_Blood_Circulation",
        type: CMRObservationU2U6PhysicalExamHeartBloodCirculation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U9_Body_Height_Measure",
        type: CMRObservationU2U9BodyHeightMeasure,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U9_No_Abnormality_Detected",
        type: CMRObservationU2U9NoAbnormalityDetected,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U2_U9_Relevant_History_Results",
        type: CMRObservationU2U9RelevantHistoryResults,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_Current_Child_History",
        type: CMRObservationU3CurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_Development_Assessment",
        type: CMRObservationU3DevelopmentAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_Family_History",
        type: CMRObservationU3FamilyHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_Physical_Exam_Head",
        type: CMRObservationU3PhysicalExamHead,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_Physical_Exam_Musculoskeletal_System",
        type: CMRObservationU3PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U4_Hip_Screening_History",
        type: CMRObservationU3U4HipScreeningHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U4_Hip_Screening_Result",
        type: CMRObservationU3U4HipScreeningResult,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-1",
                severity: "error",
                human:
                    "For previous findings a string is needed. For finding value set is needed",
                expression:
                    "((code.coding.code = '129125009:{363589002=241503003,408730004=398166005,408731000=410588008}' or code.coding.code = '129125009:{363589002=241503003,408730004=385660001,408731000=410588008}' or code.coding.code = '129125009:{363589002=241503003,408730004=410537005,408731000=410588008}') and value is string) xor (code.coding.code = '129125009:{363589002=241503003,408730004=398166005,408731000=410584005}' and value is CodeableConcept)",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U4_Hip_Screening_Result"
            },
            {
                key: "obs-2",
                severity: "error",
                human: "At least year, month and day are needed",
                expression: "effective.toString().length() >= 10",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U4_Hip_Screening_Result"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U4_Physical_Exam_Mouth_Nose",
        type: CMRObservationU3U4PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U4_Physical_Exam_Skin",
        type: CMRObservationU3U4PhysicalExamSkin,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U4_Problem_Of_Hip",
        type: CMRObservationU3U4ProblemOfHip,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U6_Indication_for_Abnormality",
        type: CMRObservationU3U6IndicationforAbnormality,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U9_Age_Appropriate_Development",
        type: CMRObservationU3U9AgeAppropriateDevelopment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U3_U9_Social_History",
        type: CMRObservationU3U9SocialHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U4_Current_Child_History",
        type: CMRObservationU4CurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U4_Development_Assessment",
        type: CMRObservationU4DevelopmentAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U4_Physical_Exam_Abdomen_Genitals",
        type: CMRObservationU4PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U4_Physical_Exam_Head",
        type: CMRObservationU4PhysicalExamHead,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U4_Physical_Exam_Musculoskeletal_System",
        type: CMRObservationU4PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U4_U5_Physical_Exam_Eyes",
        type: CMRObservationU4U5PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U4_U9_Status_Of_Immunization",
        type: CMRObservationU4U9StatusOfImmunization,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U5_Current_Child_History",
        type: CMRObservationU5CurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U5_Development_Assessment",
        type: CMRObservationU5DevelopmentAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U5_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRObservationU5PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U5_Physical_Exam_Mouth_Nose",
        type: CMRObservationU5PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U5_Physical_Exam_Musculoskeletal_System",
        type: CMRObservationU5PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U5_U6_Physical_Exam_Abdomen_Genitals",
        type: CMRObservationU5U6PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U5_U6_Physical_Exam_Head",
        type: CMRObservationU5U6PhysicalExamHead,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U5_U9_Physical_Exam_Skin",
        type: CMRObservationU5U9PhysicalExamSkin,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U6_Current_Child_History",
        type: CMRObservationU6CurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U6_Development_Assessment",
        type: CMRObservationU6DevelopmentAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U6_Physical_Exam_Eyes",
        type: CMRObservationU6PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U6_Physical_Exam_Mouth_Nose",
        type: CMRObservationU6PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U6_Physical_Exam_Musculoskeletal_System",
        type: CMRObservationU6PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U6_U7_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRObservationU6U7PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7a_and_U9_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRObservationU7aandU9PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7a_and_U9_Physical_Exam_Musculoskeletal_System",
        type: CMRObservationU7aandU9PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7a_Current_Child_History",
        type: CMRObservationU7aCurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7a_Development_Assessment",
        type: CMRObservationU7aDevelopmentAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7a_Physical_Exam_Mouth_Nose",
        type: CMRObservationU7aPhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7a_U9_Physical_Exam_Eyes",
        type: CMRObservationU7aU9PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_Current_Child_History",
        type: CMRObservationU7CurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_Development_Assessment",
        type: CMRObservationU7DevelopmentAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_Physical_Exam_Eyes",
        type: CMRObservationU7PhysicalExamEyes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_Physical_Exam_Mouth_Nose",
        type: CMRObservationU7PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_Physical_Exam_Musculoskeletal_System",
        type: CMRObservationU7PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_U7a_Physical_Exam_Abdomen_Genitals",
        type: CMRObservationU7U7aPhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_U9_BMI",
        type: CMRObservationU7U9BMI,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_U9_Body_Weight",
        type: CMRObservationU7U9BodyWeight,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "weight-1",
                severity: "error",
                human:
                    "When Observation.vlaue[x] is not present, Observation.dataAbsentReason SHALL be present",
                expression: "value.empty() implies dataAbsentReason.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_Base_BodyWeight_Max"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U7_U9_Physical_Exam_Heart_Blood_Circulation",
        type: CMRObservationU7U9PhysicalExamHeartBloodCirculation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U8_Current_Child_History",
        type: CMRObservationU8CurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U8_Development_Assessment",
        type: CMRObservationU8DevelopmentAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U8_Physical_Exam_Abdomen_Genitals",
        type: CMRObservationU8PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U8_Physical_Exam_Chest_Lung_Respiratory_Tract",
        type: CMRObservationU8PhysicalExamChestLungRespiratoryTract,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U8_Physical_Exam_Ears",
        type: CMRObservationU8PhysicalExamEars,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U8_Physical_Exam_Musculoskeletal_System",
        type: CMRObservationU8PhysicalExamMusculoskeletalSystem,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U8_U9_Physical_Exam_Mouth_Nose",
        type: CMRObservationU8U9PhysicalExamMouthNose,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U9_Current_Child_History",
        type: CMRObservationU9CurrentChildHistory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U9_Development_Assessment",
        type: CMRObservationU9DevelopmentAssessment,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Observation_U9_Physical_Exam_Abdomen_Genitals",
        type: CMRObservationU9PhysicalExamAbdomenGenitals,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Organization",
        type: CMROrganization,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "org-1",
                severity: "error",
                human:
                    "The organization SHALL at least have a name or an identifier, and possibly more than one",
                expression: "(identifier.count() + name.count()) > 0",
                xpath: "count(f:identifier | f:name) > 0",
                source: "http://hl7.org/fhir/StructureDefinition/Organization"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Organization_Screening_Laboratory",
        type: CMROrganizationScreeningLaboratory,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "org-1",
                severity: "error",
                human:
                    "The organization SHALL at least have a name or an identifier, and possibly more than one",
                expression: "(identifier.count() + name.count()) > 0",
                xpath: "count(f:identifier | f:name) > 0",
                source: "http://hl7.org/fhir/StructureDefinition/Organization"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Patient",
        type: CMRPatient,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pat-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de').empty()",
                source: "http://fhir.de/StructureDefinition/Patient"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Practitioner",
        type: CMRPractitioner,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pract-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de/0.2').empty()",
                source: "http://fhir.de/StructureDefinition/Practitioner"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_Consultation_Annotation",
        type: CMRProcedureConsultationAnnotation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Cystic_Fibrosis_Screening",
        type: CMRProcedureU1U3CysticFibrosisScreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "proc-0",
                severity: "error",
                human: "Year, month, day, hour, minute and second are needed",
                expression:
                    "performed.exists() implies performed.toString().length() >=16",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Cystic_Fibrosis_Screening"
            },
            {
                key: "proc-1",
                severity: "error",
                human: "If partOf is given,  must be completed",
                expression:
                    "partOf.exists() implies (status = 'completed' and performed.empty())",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Cystic_Fibrosis_Screening"
            },
            {
                key: "proc-2",
                severity: "error",
                human: "If status is not-done, partOf must be empty",
                expression: "Status = 'not-done' implies partOf.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Cystic_Fibrosis_Screening"
            },
            {
                key: "proc-3",
                severity: "error",
                human: "If statusReason is given, partOf must be empty",
                expression: "statusReason.empty().not() implies partOf.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Cystic_Fibrosis_Screening"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Newborn_Blood_Spot_Screening",
        type: CMRProcedureU1U3NewbornBloodSpotScreening,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "proc-0",
                severity: "error",
                human: "statusReason SHALL only be present, if performed[x] is empty",
                expression: "statusReason.empty() or performed.empty()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Newborn_Blood_Spot_Screening|1.0.0"
            },
            {
                key: "proc-1",
                severity: "error",
                human: "Extension may be choosen if first blood sampling is choosen",
                expression:
                    "extension.where(url = 'https://fhir.kbv.de/StructureDefinition/KBV_Ex_MIO_CMR_Early_Collection_Of_Blood').exists() implies (code.coding.code ='425758004:246513007=261422002')",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Newborn_Blood_Spot_Screening"
            },
            {
                key: "proc-2",
                severity: "error",
                human:
                    "Year, month, day, hour, minute and second are needed for first sampling",
                expression:
                    "code.coding.code = '425758004:246513007=261426004' implies performed.toString().length() >= 22",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Newborn_Blood_Spot_Screening"
            },
            {
                key: "proc-3",
                severity: "error",
                human: "Year, month and day are needed for second sampling",
                expression:
                    "(code.coding.code = '425758004:246513007=261426004'  or code.coding.code = '425758004:246513007=261429006') implies performed.toString().length() = 10",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U1_U3_Newborn_Blood_Spot_Screening"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U2_Consultation",
        type: CMRProcedureU2Consultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U3_Consultation",
        type: CMRProcedureU3Consultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U4_Consultation",
        type: CMRProcedureU4Consultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U5_Consultation",
        type: CMRProcedureU5Consultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U6_Consultation",
        type: CMRProcedureU6Consultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U7a_Consultation",
        type: CMRProcedureU7aConsultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U7_Consultation",
        type: CMRProcedureU7Consultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U8_Consultation",
        type: CMRProcedureU8Consultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Procedure_U9_Consultation",
        type: CMRProcedureU9Consultation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Service_Request_Dental_Referral",
        type: CMRServiceRequestDentalReferral,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "prr-1",
                severity: "error",
                human: "orderDetail SHALL only be present if code is present",
                expression: "orderDetail.empty() or code.exists()",
                xpath: "exists(f:code) or not(exists(f:orderDetail))",
                source: "http://hl7.org/fhir/StructureDefinition/ServiceRequest"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Service_Request_U1_U3_Pulse_Oxymetry_Clarification",
        type: CMRServiceRequestU1U3PulseOxymetryClarification,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "prr-1",
                severity: "error",
                human: "orderDetail SHALL only be present if code is present",
                expression: "orderDetail.empty() or code.exists()",
                xpath: "exists(f:code) or not(exists(f:orderDetail))",
                source: "http://hl7.org/fhir/StructureDefinition/ServiceRequest"
            },
            {
                key: "serv-1",
                severity: "error",
                human: "At least year, month and day are needed",
                expression: "authoredOn.toString().length() >= 10",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Service_Request_U1_U3_Pulse_Oxymetry_Clarification"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Service_Request_U1_U5_Referral_Pediatric_Audiology_Service",
        type: CMRServiceRequestU1U5ReferralPediatricAudiologyService,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "prr-1",
                severity: "error",
                human: "orderDetail SHALL only be present if code is present",
                expression: "orderDetail.empty() or code.exists()",
                xpath: "exists(f:code) or not(exists(f:orderDetail))",
                source: "http://hl7.org/fhir/StructureDefinition/ServiceRequest"
            },
            {
                key: "serv-0",
                severity: "error",
                human: "At least year, month and day are needed",
                expression: "authoredOn.toString().length() >= 10",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_CMR_Service_Request_U1_U5_Referral_Pediatric_Audiology_Service"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Bundle",
        type: PCBundle,
        version: "1.00.000",
        constraints: [
            {
                key: "bdl-7",
                severity: "error",
                human:
                    "FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId (except in history bundles)",
                expression:
                    "(type = 'history') or entry.where(fullUrl.exists()).select(fullUrl&resource.meta.versionId).isDistinct()",
                xpath:
                    "(f:type/@value = 'history') or (count(for $entry in f:entry[f:resource] return $entry[count(parent::f:Bundle/f:entry[f:fullUrl/@value=$entry/f:fullUrl/@value and ((not(f:resource/*/f:meta/f:versionId/@value) and not($entry/f:resource/*/f:meta/f:versionId/@value)) or f:resource/*/f:meta/f:versionId/@value=$entry/f:resource/*/f:meta/f:versionId/@value)])!=1])=0)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-9",
                severity: "error",
                human: "A document must have an identifier with a system and a value",
                expression:
                    "type = 'document' implies (identifier.system.exists() and identifier.value.exists())",
                xpath:
                    "not(f:type/@value = 'document') or exists(f:identifier/f:system) or exists(f:identifier/f:value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-3",
                severity: "error",
                human:
                    "entry.request mandatory for batch/transaction/history, otherwise prohibited",
                expression:
                    "entry.all(request.exists() = (%resource.type = 'batch' or %resource.type = 'transaction' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:request) or (f:type/@value = 'batch') or (f:type/@value = 'transaction') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-4",
                severity: "error",
                human:
                    "entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited",
                expression:
                    "entry.all(response.exists() = (%resource.type = 'batch-response' or %resource.type = 'transaction-response' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:response) or (f:type/@value = 'batch-response') or (f:type/@value = 'transaction-response') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-12",
                severity: "error",
                human: "A message must have a MessageHeader as the first resource",
                expression:
                    "type = 'message' implies entry.first().resource.is(MessageHeader)",
                xpath:
                    "not(f:type/@value='message') or f:entry[1]/f:resource/f:MessageHeader",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-1",
                severity: "error",
                human: "total only when a search or history",
                expression: "total.empty() or (type = 'searchset') or (type = 'history')",
                xpath:
                    "not(f:total) or (f:type/@value = 'searchset') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-2",
                severity: "error",
                human: "entry.search only when a search",
                expression: "entry.search.empty() or (type = 'searchset')",
                xpath: "not(f:entry/f:search) or (f:type/@value = 'searchset')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-11",
                severity: "error",
                human: "A document must have a Composition as the first resource",
                expression:
                    "type = 'document' implies entry.first().resource.is(Composition)",
                xpath:
                    "not(f:type/@value='document') or f:entry[1]/f:resource/f:Composition",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-10",
                severity: "error",
                human: "A document must have a date",
                expression: "type = 'document' implies (timestamp.hasValue())",
                xpath: "not(f:type/@value = 'document') or exists(f:timestamp/@value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "TypeComposition",
                severity: "error",
                human: "vorhanden sein",
                expression:
                    "entry.where(meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Composition_Examination_Participation').isDistinct()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Bundle|1.0.0"
            },
            {
                key: "OneComposition",
                severity: "error",
                human: "Es darf genau eine Composition geben",
                expression: "entry.where(ofType(Composition)).isDistinct()",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Bundle|1.0.0"
            },
            {
                key: "UUID",
                severity: "error",
                human: "Es soll eine UUID verwendet werden.",
                expression: "identifer.system.startsWith('urn:uuid:')",
                source:
                    "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Bundle|1.0.0"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Composition_Examination_Participation",
        type: PCCompositionExaminationParticipation,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Encounter",
        type: PCEncounter,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Organization",
        type: PCOrganization,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "org-1",
                severity: "error",
                human:
                    "The organization SHALL at least have a name or an identifier, and possibly more than one",
                expression: "(identifier.count() + name.count()) > 0",
                xpath: "count(f:identifier | f:name) > 0",
                source: "http://hl7.org/fhir/StructureDefinition/Organization"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Patient",
        type: PCPatient,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pat-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de').empty()",
                source: "http://fhir.de/StructureDefinition/Patient"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PC_Practitioner",
        type: PCPractitioner,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pract-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de/0.2').empty()",
                source: "http://fhir.de/StructureDefinition/Practitioner"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Bundle",
        type: PNBundle,
        version: "1.00.000",
        constraints: [
            {
                key: "bdl-7",
                severity: "error",
                human:
                    "FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId (except in history bundles)",
                expression:
                    "(type = 'history') or entry.where(fullUrl.exists()).select(fullUrl&resource.meta.versionId).isDistinct()",
                xpath:
                    "(f:type/@value = 'history') or (count(for $entry in f:entry[f:resource] return $entry[count(parent::f:Bundle/f:entry[f:fullUrl/@value=$entry/f:fullUrl/@value and ((not(f:resource/*/f:meta/f:versionId/@value) and not($entry/f:resource/*/f:meta/f:versionId/@value)) or f:resource/*/f:meta/f:versionId/@value=$entry/f:resource/*/f:meta/f:versionId/@value)])!=1])=0)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-9",
                severity: "error",
                human: "A document must have an identifier with a system and a value",
                expression:
                    "type = 'document' implies (identifier.system.exists() and identifier.value.exists())",
                xpath:
                    "not(f:type/@value = 'document') or exists(f:identifier/f:system) or exists(f:identifier/f:value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-3",
                severity: "error",
                human:
                    "entry.request mandatory for batch/transaction/history, otherwise prohibited",
                expression:
                    "entry.all(request.exists() = (%resource.type = 'batch' or %resource.type = 'transaction' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:request) or (f:type/@value = 'batch') or (f:type/@value = 'transaction') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-4",
                severity: "error",
                human:
                    "entry.response mandatory for batch-response/transaction-response/history, otherwise prohibited",
                expression:
                    "entry.all(response.exists() = (%resource.type = 'batch-response' or %resource.type = 'transaction-response' or %resource.type = 'history'))",
                xpath:
                    "not(f:entry/f:response) or (f:type/@value = 'batch-response') or (f:type/@value = 'transaction-response') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-12",
                severity: "error",
                human: "A message must have a MessageHeader as the first resource",
                expression:
                    "type = 'message' implies entry.first().resource.is(MessageHeader)",
                xpath:
                    "not(f:type/@value='message') or f:entry[1]/f:resource/f:MessageHeader",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-1",
                severity: "error",
                human: "total only when a search or history",
                expression: "total.empty() or (type = 'searchset') or (type = 'history')",
                xpath:
                    "not(f:total) or (f:type/@value = 'searchset') or (f:type/@value = 'history')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-2",
                severity: "error",
                human: "entry.search only when a search",
                expression: "entry.search.empty() or (type = 'searchset')",
                xpath: "not(f:entry/f:search) or (f:type/@value = 'searchset')",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-11",
                severity: "error",
                human: "A document must have a Composition as the first resource",
                expression:
                    "type = 'document' implies entry.first().resource.is(Composition)",
                xpath:
                    "not(f:type/@value='document') or f:entry[1]/f:resource/f:Composition",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "bdl-10",
                severity: "error",
                human: "A document must have a date",
                expression: "type = 'document' implies (timestamp.hasValue())",
                xpath: "not(f:type/@value = 'document') or exists(f:timestamp/@value)",
                source: "http://hl7.org/fhir/StructureDefinition/Bundle"
            },
            {
                key: "TypeComposition",
                severity: "error",
                human:
                    "Es d√ºrfen nur Compositions der U-Untersuchungen bzw. der speziellen Fr√ºherkennungsuntersuchungen vorhanden sein",
                expression:
                    "entry.where(meta.profile='https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Composition_Parental_Notes').isDistinct()",
                source: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Bundle"
            },
            {
                key: "OneComposition",
                severity: "error",
                human: "Es darf genau eine Composition geben",
                expression: "entry.where(ofType(Composition)).isDistinct()",
                source: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Bundle"
            },
            {
                key: "UUID",
                severity: "error",
                human: "Es soll eine UUID verwendet werden.",
                expression: "identifer.system.startsWith('urn:uuid:')",
                source: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Bundle"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Composition_Parental_Notes",
        type: PNCompositionParentalNotes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Encounter",
        type: PNEncounter,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            }
        ]
    },
    {
        profile:
            "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Observation_Parental_Notes",
        type: PNObservationParentalNotes,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "obs-7",
                severity: "error",
                human:
                    "If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present",
                expression:
                    "value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()",
                xpath:
                    "not(f:*[starts-with(local-name(.), 'value')] and (for $coding in f:code/f:coding return f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value] [f:system/@value=$coding/f:system/@value]))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            },
            {
                key: "obs-6",
                severity: "error",
                human:
                    "dataAbsentReason SHALL only be present if Observation.value[x] is not present",
                expression: "dataAbsentReason.empty() or value.empty()",
                xpath:
                    "not(exists(f:dataAbsentReason)) or (not(exists(*[starts-with(local-name(.), 'value')])))",
                source: "http://hl7.org/fhir/StructureDefinition/Observation"
            }
        ]
    },
    {
        profile: "https://fhir.kbv.de/StructureDefinition/KBV_PR_MIO_PN_Patient",
        type: PNPatient,
        version: "1.00.000",
        constraints: [
            {
                key: "dom-2",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL NOT contain nested Resources",
                expression: "contained.contained.empty()",
                xpath: "not(parent::f:contained and f:contained)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-4",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated",
                expression:
                    "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
                xpath:
                    "not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-3",
                severity: "error",
                human:
                    "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource",
                expression:
                    "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
                xpath:
                    "not(exists(for $id in f:contained/*/f:id/@value return $contained[not(parent::*/descendant::f:reference/@value=concat('#', $contained/*/id/@value) or descendant::f:reference[@value='#'])]))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                extension: [
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice",
                        valueBoolean: true
                    },
                    {
                        url:
                            "http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice-explanation",
                        valueMarkdown:
                            "When a resource has no narrative, only systems that fully understand the data can display the resource to a human safely. Including a human readable representation in the resource makes for a much more robust eco-system and cheaper handling of resources by intermediary systems. Some ecosystems restrict distribution of resources to only those systems that do fully understand the resources, and as a consequence implementers may believe that the narrative is superfluous. However experience shows that such eco-systems often open up to new participants over time."
                    }
                ],
                key: "dom-6",
                severity: "warning",
                human: "A resource should have narrative for robust management",
                expression: "text.`div`.exists()",
                xpath: "exists(f:text/h:div)",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "dom-5",
                severity: "error",
                human:
                    "If a resource is contained in another resource, it SHALL NOT have a security label",
                expression: "contained.meta.security.empty()",
                xpath: "not(exists(f:contained/*/f:meta/f:security))",
                source: "http://hl7.org/fhir/StructureDefinition/DomainResource"
            },
            {
                key: "pat-de-1",
                severity: "error",
                human:
                    "Die amtliche Differenzierung der Geschlechtsangabe 'other' darf nur gef√ºllt sein, wenn das Geschlecht 'other' angegeben ist",
                expression:
                    "gender='other' or gender.extension('http://fhir.de/StructureDefinition/gender-amtlich-de').empty()",
                source: "http://fhir.de/StructureDefinition/Patient"
            }
        ]
    }
];
